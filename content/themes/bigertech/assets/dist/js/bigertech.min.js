var animatedHeader=function(){function t(){window.addEventListener?window.addEventListener("scroll",function(){s||(s=!0,setTimeout(e,250))},!1):window.attachEvent("onscroll",function(){s||(s=!0,setTimeout(e,250))})}function e(){var t=n();t>=r?classie.add(o,"navbar-pinned"):classie.remove(o,"navbar-pinned"),s=!1}function n(){return window.pageYOffset||i.scrollTop}var i=document.documentElement,o=document.querySelector(".navbar"),s=!1,r=312;if(document.querySelector(".home-template")&&document.body.clientWidth>740&&t(),document.querySelector(".category-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>740&&t()}if(document.querySelector(".author-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>740&&t()}}();!function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function n(t,e){var n=i(t,e)?s:o;n(t,e)}var i,o,s;"classList"in document.documentElement?(i=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(i=function(t,n){return e(n).test(t.className)},o=function(t,e){i(t,e)||(t.className=t.className+" "+e)},s=function(t,n){t.className=t.className.replace(e(n)," ")});var r={hasClass:i,addClass:o,removeClass:s,toggleClass:n,has:i,add:o,remove:s,toggle:n};"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r:t.classie=r}(window),jQuery(function(t){navigator.userAgent.indexOf("MSIE")<0&&console.log("^_^ 想加入笔戈科技开发团队？请发送邮件到 liuxing@meizu.com"),t("img.lazy")&&t("img.lazy").length>0&&t("img.lazy").lazyload({effect:"fadeIn",threshold:500}),t(document).ready(function(){var e=t(".qrcode");t(".icon-wechat").hover(function(){var n=t(this).position();e.css("left",(t(window).width()-e.width())/2),e.css("top",n.top-270),e.fadeIn().show()},function(){e.hide()})})}),!function(t,e,n,i){var o=t(e);t.fn.lazyload=function(s){function r(){var e=0;a.each(function(){var n=t(this);if(!l.skip_invisible||n.is(":visible"))if(t.abovethetop(this,l)||t.leftofbegin(this,l));else if(t.belowthefold(this,l)||t.rightoffold(this,l)){if(++e>l.failure_limit)return!1}else n.trigger("appear"),e=0})}var c,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(l,s)),c=l.container===i||l.container===e?o:t(l.container),0===l.event.indexOf("scroll")&&c.bind(l.event,function(){return r()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,(n.attr("src")===i||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var i=a.length;l.appear.call(e,i,l)}t("<img />").bind("load",function(){var i=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[l.effect](l.effect_speed),e.loaded=!0;var o=t.grep(a,function(t){return!t.loaded});if(a=t(o),l.load){var s=a.length;l.load.call(e,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){e.loaded||n.trigger("appear")})}),o.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){r()}),this},t.belowthefold=function(n,s){var r;return r=s.container===i||s.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(s.container).offset().top+t(s.container).height(),r<=t(n).offset().top-s.threshold},t.rightoffold=function(n,s){var r;return r=s.container===i||s.container===e?o.width()+o.scrollLeft():t(s.container).offset().left+t(s.container).width(),r<=t(n).offset().left-s.threshold},t.abovethetop=function(n,s){var r;return r=s.container===i||s.container===e?o.scrollTop():t(s.container).offset().top,r>=t(n).offset().top+s.threshold+t(n).height()},t.leftofbegin=function(n,s){var r;return r=s.container===i||s.container===e?o.scrollLeft():t(s.container).offset().left,r>=t(n).offset().left+s.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document);var Menu={settings:{menuBtn:$(".js-menuBtn"),menu:$(".js-menu"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-menuContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.menuBtn.click(function(){Menu.toggle()}),t.bg.click(function(){Menu.close()}),t.container.click(function(){Menu.close()}),t.closeBtn.click(function(){Menu.close()}),$(window).keydown(function(t){27===t.which&&Menu.close()})},toggle:function(){var t=this.settings;t.isOpen?Menu.close():Menu.open()},open:function(){function t(){e.menu.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.menu.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.menu.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.menu.removeClass("is-active"),setTimeout(t,1200))}},Search={settings:{textBox:$(".textbox"),searchBtn:$(".js-searchBtn"),search:$(".js-search"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-searchContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.searchBtn.click(function(){Search.toggle()}),t.textBox.click(function(){return!1}),t.bg.click(function(){Search.close()}),t.container.click(function(){Search.close()}),t.closeBtn.click(function(){Search.close()}),$(window).keydown(function(t){27===t.which&&Search.close()})},toggle:function(){var t=this.settings;t.isOpen?Search.close():Search.open()},open:function(){function t(){e.search.addClass("is-active"),e.textBox.focus(),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.search.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.search.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.search.removeClass("is-active"),setTimeout(t,1200))}};$(document).ready(function(){Menu.init(),Search.init()});var scrolltotop={setting:{startline:100,scrollto:0,scrollduration:1e3,fadeduration:[500,100]},controlHTML:"<div id='toTop' class='icon-up'></div>",controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var t=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);t="string"==typeof t&&1==jQuery("#"+t).length?jQuery("#"+t).offset().top:0,this.$body.animate({scrollTop:t},this.setting.scrollduration)},keepfixed:function(){var t=jQuery(window),e=t.scrollLeft()+t.width()-this.$control.width()-this.controlattrs.offsetx,n=t.scrollTop()+t.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:e+"px",top:n+"px"})},togglecontrol:function(){var t=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=t>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(t){var e=scrolltotop,n=document.all;e.cssfixedsupport=!n||n&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,e.$body=window.opera?"CSS1Compat"==document.compatMode?t("html"):t("body"):t("html,body"),e.$control=t('<div id="topcontrol">'+e.controlHTML+"</div>").css({position:e.cssfixedsupport?"fixed":"absolute",bottom:e.controlattrs.offsety,right:e.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll to Top"}).click(function(){return e.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=e.$control.text()&&e.$control.css({width:e.$control.width()}),e.togglecontrol(),t('a[href="'+e.anchorkeyword+'"]').click(function(){return e.scrollup(),!1}),t(window).bind("scroll resize",function(){e.togglecontrol()})})}};scrolltotop.init(),function(t){"use strict";t(document).ready(function(){t(".scroll-down").arctic_scroll()})}(jQuery),function(t){t.fn.arctic_scroll=function(e){var n={elem:t(this),speed:500},e=t.extend(n,e);e.elem.click(function(n){n.preventDefault();var i=t(this).attr("data-offset")?t(this).attr("data-offset"):!1,o=t(this).attr("data-position")?t(this).attr("data-position"):!1;if(i){var s=parseInt(i);t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top+s},e.speed)}else if(o){var s=parseInt(o);t("html,body").stop(!0,!1).animate({scrollTop:s},e.speed)}else t("html,body").stop(!0,!1).animate({scrollTop:t(this.hash).offset().top},e.speed)})}}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGVkSGVhZGVyLmpzIiwiY2xhc3NpZS5qcyIsImluZGV4LmpzIiwianF1ZXJ5Lmxhenlsb2FkLm1pbi5qcyIsIm5hdmJhci5qcyIsInJldHVyblRvcC5qcyIsInNjcm9sbF9kb3duLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVdBLEdBQUEsZ0JBQUEsV0FPQSxRQUFBLEtBQ0EsT0FBQSxpQkFDQSxPQUFBLGlCQUFBLFNBQUEsV0FDQSxJQUNBLEdBQUEsRUFDQSxXQUFBLEVBQUEsUUFFQSxHQUVBLE9BQUEsWUFBQSxXQUFBLFdBQ0EsSUFDQSxHQUFBLEVBQ0EsV0FBQSxFQUFBLFFBaUJBLFFBQUEsS0FDQSxHQUFBLEdBQUEsR0FDQSxJQUFBLEVBQ0EsUUFBQSxJQUFBLEVBQUEsaUJBR0EsUUFBQSxPQUFBLEVBQUEsaUJBR0EsR0FBQSxFQUdBLFFBQUEsS0FDQSxNQUFBLFFBQUEsYUFBQSxFQUFBLFVBL0NBLEdBQUEsR0FBQSxTQUFBLGdCQUNBLEVBQUEsU0FBQSxjQUFBLFdBQ0EsR0FBQSxFQUNBLEVBQUEsR0FxREEsSUFOQSxTQUFBLGNBQUEsbUJBQ0EsU0FBQSxLQUFBLFlBQUEsS0FDQSxJQUlBLFNBQUEsY0FBQSxzQkFBQSxDQUNBLEdBQUEsU0FBQSxjQUFBLHFCQUNBLE9BQUEsQ0FFQSxVQUFBLEtBQUEsWUFBQSxLQUNBLElBS0EsR0FBQSxTQUFBLGNBQUEsb0JBQUEsQ0FDQSxHQUFBLFNBQUEsY0FBQSxxQkFDQSxPQUFBLENBRUEsVUFBQSxLQUFBLFlBQUEsS0FDQSxTQ2pFQSxTQUFBLEdBRUEsWUFJQSxTQUFBLEdBQUEsR0FDQSxNQUFBLElBQUEsUUFBQSxXQUFBLEVBQUEsWUFnQ0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsRUFBQSxHQTdCQSxHQUFBLEdBQUEsRUFBQSxDQUVBLGNBQUEsVUFBQSxpQkFDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLFNBQUEsSUFFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxJQUFBLElBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsT0FBQSxNQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFlBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLFVBQUEsRUFBQSxVQUFBLElBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUFBLFVBQUEsUUFBQSxFQUFBLEdBQUEsTUFTQSxJQUFBLElBRUEsU0FBQSxFQUNBLFNBQUEsRUFDQSxZQUFBLEVBQ0EsWUFBQSxFQUVBLElBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxFQUNBLE9BQUEsRUFJQSxtQkFBQSxTQUFBLE9BQUEsSUFFQSxPQUFBLEdBQ0EsZ0JBQUEsU0FFQSxPQUFBLFFBQUEsRUFHQSxFQUFBLFFBQUEsR0FHQSxRQ3BGQSxPQUFBLFNBQUEsR0FDQSxVQUFBLFVBQUEsUUFBQSxRQUFBLEdBRUEsUUFBQSxJQUFBLDRDQUdBLEVBQUEsYUFBQSxFQUFBLFlBQUEsT0FBQSxHQUNBLEVBQUEsWUFBQSxVQUNBLE9BQUEsU0FDQSxVQUFBLE1BR0EsRUFBQSxVQUFBLE1BQUEsV0FDQSxHQUFBLEdBQUEsRUFBQSxVQUNBLEdBQUEsZ0JBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLE1BQUEsVUFDQSxHQUFBLElBQUEsUUFBQSxFQUFBLFFBQUEsUUFBQSxFQUFBLFNBQUEsR0FDQSxFQUFBLElBQUEsTUFBQSxFQUFBLElBQUEsS0FDQSxFQUFBLFNBQUEsUUFDQSxXQUNBLEVBQUEsY0N2QkEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxHQUFBLFNBQUEsU0FBQSxHQUFBLFFBQUEsS0FBQSxHQUFBLEdBQUEsQ0FBQSxHQUFBLEtBQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEtBQUEsRUFBQSxnQkFBQSxFQUFBLEdBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxLQUFBLElBQUEsRUFBQSxZQUFBLEtBQUEsUUFBQSxJQUFBLEVBQUEsYUFBQSxLQUFBLElBQUEsRUFBQSxZQUFBLEtBQUEsSUFBQSxLQUFBLEVBQUEsRUFBQSxjQUFBLE9BQUEsTUFBQSxHQUFBLFFBQUEsVUFBQSxFQUFBLElBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxHQUFBLFVBQUEsRUFBQSxjQUFBLEVBQUEsTUFBQSxTQUFBLE9BQUEsT0FBQSxVQUFBLEVBQUEsZUFBQSxXQUFBLGdCQUFBLEVBQUEsT0FBQSxLQUFBLEtBQUEsS0FBQSxZQUFBLHlMQUFBLE9BQUEsS0FBQSxJQUFBLEVBQUEsZUFBQSxFQUFBLGNBQUEsRUFBQSxtQkFBQSxHQUFBLGNBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEVBQUEsa0JBQUEsR0FBQSxhQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxXQUFBLElBQUEsRUFBQSxNQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLFdBQUEsTUFBQSxPQUFBLEtBQUEsS0FBQSxXQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLEVBQUEsS0FBQSxTQUFBLEdBQUEsRUFBQSxLQUFBLFVBQUEsSUFBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLEtBQUEsTUFBQSxFQUFBLGFBQUEsRUFBQSxJQUFBLFNBQUEsV0FBQSxJQUFBLEtBQUEsT0FBQSxDQUFBLEdBQUEsRUFBQSxPQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLE9BQUEsS0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLFdBQUEsS0FBQSxPQUFBLFdBQUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsZUFBQSxHQUFBLE9BQUEsRUFBQSxHQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxFQUFBLElBQUEsbUJBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxjQUFBLEVBQUEsUUFBQSxDQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFFBQUEsSUFBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLEtBQUEsQ0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsS0FBQSxLQUFBLEVBQUEsRUFBQSxNQUFBLEtBQUEsTUFBQSxFQUFBLEtBQUEsUUFBQSxFQUFBLG9CQUFBLElBQUEsRUFBQSxNQUFBLFFBQUEsV0FBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLFdBQUEsRUFBQSxRQUFBLEVBQUEsUUFBQSxjQUFBLEVBQUEsS0FBQSxTQUFBLFdBQUEsTUFBQSwrQkFBQSxLQUFBLFVBQUEsYUFBQSxFQUFBLEtBQUEsV0FBQSxTQUFBLEdBQUEsRUFBQSxlQUFBLEVBQUEsY0FBQSxXQUFBLEVBQUEsS0FBQSxXQUFBLEVBQUEsTUFBQSxRQUFBLGNBQUEsRUFBQSxHQUFBLE1BQUEsV0FBQSxNQUFBLE1BQUEsRUFBQSxhQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsWUFBQSxFQUFBLFVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsSUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEtBQUEsRUFBQSxFQUFBLFdBQUEsUUFBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLEtBQUEsRUFBQSxXQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLElBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsVUFBQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLGFBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxLQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsS0FBQSxFQUFBLFVBQUEsRUFBQSxHQUFBLFNBQUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxHQUFBLFFBQUEsRUFBQSxZQUFBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxJQUFBLEVBQUEsYUFBQSxFQUFBLElBQUEsRUFBQSxZQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLE1BQUEsaUJBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxhQUFBLEdBQUEsVUFBQSxLQUFBLGdCQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsYUFBQSxHQUFBLFVBQUEsS0FBQSxrQkFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsR0FBQSxVQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxZQUFBLEdBQUEsVUFBQSxLQUFBLGNBQUEsU0FBQSxHQUFBLE1BQUEsR0FBQSxXQUFBLEdBQUEsVUFBQSxLQUFBLGlCQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsYUFBQSxHQUFBLFVBQUEsS0FBQSxnQkFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFlBQUEsR0FBQSxVQUFBLEtBQUEsZUFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFlBQUEsR0FBQSxVQUFBLFFBQUEsT0FBQSxPQUFBLFNDREEsSUFBQSxPQUNBLFVBQ0EsUUFBQSxFQUFBLGVBQ0EsS0FBQSxFQUFBLFlBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSxxQkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsUUFBQSxNQUFBLFdBQ0EsS0FBQSxXQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsS0FBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxLQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLEtBQUEsUUFBQSxLQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLEtBQUEsU0FBQSxhQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxLQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUdBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxLQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxLQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsU0FHQSxRQUNBLFVBQ0EsUUFBQSxFQUFBLFlBQ0EsVUFBQSxFQUFBLGlCQUNBLE9BQUEsRUFBQSxjQUNBLFNBQUEsRUFBQSxnQkFDQSxHQUFBLEVBQUEsVUFDQSxVQUFBLEVBQUEsdUJBQ0EsUUFBQSxFQUNBLGFBQUEsR0FFQSxLQUFBLFdBQ0EsS0FBQSxpQkFFQSxjQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsV0FHQSxFQUFBLFFBQUEsTUFBQSxXQUNBLE9BQUEsSUFFQSxFQUFBLEdBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFNBQUEsTUFBQSxXQUNBLE9BQUEsVUFFQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsS0FBQSxFQUFBLE9BQUEsT0FBQSxXQUdBLE9BQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxPQUFBLFFBQUEsT0FBQSxRQUVBLEtBQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLFNBQUEsYUFDQSxFQUFBLFFBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsT0FBQSxJQUFBLFVBQUEsU0FDQSxXQUFBLEVBQUEsT0FJQSxNQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsT0FBQSxJQUFBLFVBQUEsUUFDQSxFQUFBLGFBQUEsRUFFQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsZUFBQSxJQUNBLEVBQUEsUUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsT0FBQSxZQUFBLGFBQ0EsV0FBQSxFQUFBLFFBTUEsR0FBQSxVQUFBLE1BQUEsV0FDQSxLQUFBLE9BQ0EsT0FBQSxRQ3JJQSxJQUFBLGNBTUEsU0FBQSxVQUFBLElBQUEsU0FBQSxFQUFBLGVBQUEsSUFBQSxjQUFBLElBQUEsTUFFQSxZQUFBLHlDQUVBLGNBQUEsUUFBQSxFQUFBLFFBQUEsR0FFQSxjQUFBLE9BRUEsT0FBQSxXQUFBLEVBQUEsZUFBQSxHQUdBLFNBQUEsV0FFQSxLQUFBLGlCQUVBLEtBQUEsU0FBQSxLQUFBLFFBQUEsR0FFQSxJQUFBLEdBQUEsTUFBQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsU0FBQSxTQUFBLEtBQUEsUUFBQSxTQUlBLEdBRkEsZ0JBQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxHQUFBLE9BRUEsT0FBQSxJQUFBLEdBQUEsU0FBQSxJQUlBLEVBRUEsS0FBQSxNQUFBLFNBQUEsVUFBQSxHQUFBLEtBQUEsUUFBQSxpQkFLQSxVQUFBLFdBRUEsR0FBQSxHQUFBLE9BQUEsUUFFQSxFQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsS0FBQSxTQUFBLFFBQUEsS0FBQSxhQUFBLFFBRUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxTQUFBLEtBQUEsU0FBQSxTQUFBLEtBQUEsYUFBQSxPQUVBLE1BQUEsU0FBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxRQUtBLGNBQUEsV0FJQSxHQUFBLEdBQUEsT0FBQSxRQUFBLFdBRUEsTUFBQSxpQkFFQSxLQUFBLFlBRUEsS0FBQSxNQUFBLGNBQUEsR0FBQSxLQUFBLFFBQUEsV0FBQSxHQUFBLEVBRUEsS0FBQSxNQUFBLGdCQUFBLEtBQUEsTUFBQSxXQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsR0FJQSxHQUFBLEtBQUEsTUFBQSxlQUFBLEtBQUEsTUFBQSxZQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsSUFLQSxLQUFBLFdBQ0EsT0FBQSxVQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxZQUNBLEVBQUEsU0FBQSxHQUNBLEdBQUEsaUJBQUEsR0FBQSxHQUFBLGNBQUEsU0FBQSxZQUFBLE9BQUEsZUFDQSxFQUFBLE1BQUEsT0FBQSxNQUFBLGNBQUEsU0FBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxhQUNBLEVBQUEsU0FBQSxFQUFBLHdCQUFBLEVBQUEsWUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLGdCQUFBLFFBQUEsV0FBQSxPQUFBLEVBQUEsYUFBQSxRQUFBLE1BQUEsRUFBQSxhQUFBLFFBQUEsUUFBQSxFQUFBLE9BQUEsWUFDQSxNQUFBLE1BQUEsa0JBQ0EsTUFBQSxXQUFBLE1BQUEsR0FBQSxZQUFBLElBQ0EsU0FBQSxRQUNBLFNBQUEsTUFBQSxPQUFBLGdCQUFBLElBQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLGdCQUVBLEVBQUEsV0FBQSxFQUFBLGNBQUEsTUFBQSxNQUFBLFdBRUEsTUFEQSxHQUFBLFlBQ0EsSUFFQSxFQUFBLFFBQUEsS0FBQSxnQkFBQSxXQUNBLEVBQUEscUJBS0EsYUFBQSxPQ3hHQSxTQUFBLEdBQ0EsWUFDQSxHQUFBLFVBQUEsTUFBQSxXQUNBLEVBQUEsZ0JBQUEsbUJBR0EsUUFFQSxTQUFBLEdBQ0EsRUFBQSxHQUFBLGNBQUEsU0FBQSxHQUVBLEdBQUEsSUFDQSxLQUFBLEVBQUEsTUFDQSxNQUFBLEtBRUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxFQUVBLEdBQUEsS0FBQSxNQUFBLFNBQUEsR0FDQSxFQUFBLGdCQUNBLElBQUEsR0FBQSxFQUFBLE1BQUEsS0FBQSxlQUFBLEVBQUEsTUFBQSxLQUFBLGdCQUFBLEVBQ0EsRUFBQSxFQUFBLE1BQUEsS0FBQSxpQkFBQSxFQUFBLE1BQUEsS0FBQSxrQkFBQSxDQUNBLElBQUEsRUFBQSxDQUNBLEdBQUEsR0FBQSxTQUFBLEVBQ0EsR0FBQSxhQUFBLE1BQUEsR0FBQSxHQUFBLFNBQUEsVUFBQSxFQUFBLEtBQUEsTUFBQSxTQUFBLElBQUEsR0FBQSxFQUFBLFdBQ0EsSUFBQSxFQUFBLENBQ0EsR0FBQSxHQUFBLFNBQUEsRUFDQSxHQUFBLGFBQUEsTUFBQSxHQUFBLEdBQUEsU0FBQSxVQUFBLEdBQUEsRUFBQSxXQUVBLEdBQUEsYUFBQSxNQUFBLEdBQUEsR0FBQSxTQUFBLFVBQUEsRUFBQSxLQUFBLE1BQUEsU0FBQSxLQUFBLEVBQUEsV0FLQSIsImZpbGUiOiJiaWdlcnRlY2gubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBjYnBBbmltYXRlZEhlYWRlci5qcyB2MS4wLjBcbiAqIGh0dHA6Ly93d3cuY29kcm9wcy5jb21cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICpcbiAqIENvcHlyaWdodCAyMDEzLCBDb2Ryb3BzXG4gKiBodHRwOi8vd3d3LmNvZHJvcHMuY29tXG4gKi9cblxudmFyIGFuaW1hdGVkSGVhZGVyID0gKGZ1bmN0aW9uKCkge1xuXG5cdHZhciBkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdCAgbmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uYXZiYXInICksXG5cdFx0ICBkaWRTY3JvbGwgPSBmYWxzZSxcblx0XHQgIGNoYW5nZUhlYWRlck9uID0gMzEyO1xuXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAgICAgaWYoICFkaWRTY3JvbGwgKSB7XG4gICAgICAgICAgZGlkU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCBzY3JvbGxQYWdlLCAyNTAgKTtcbiAgICAgICAgfVxuICAgICAgfSwgZmFsc2UgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmF0dGFjaEV2ZW50KCAnb25zY3JvbGwnLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgIGlmICggIWRpZFNjcm9sbCApIHtcbiAgICAgICAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgIHNldFRpbWVvdXQoIHNjcm9sbFBhZ2UsIDI1MCApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cdH1cblxuLy8gIGZ1bmN0aW9uIGluaXQoKSB7XG4vLyAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcbi8vICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdzY3JvbGwnLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4vLyAgICAgICAgaWYoICFkaWRTY3JvbGwgKSB7XG4vLyAgICAgICAgICBkaWRTY3JvbGwgPSB0cnVlO1xuLy8gICAgICAgICAgc2V0VGltZW91dCggc2Nyb2xsUGFnZSwgMjUwICk7XG4vLyAgICAgICAgfVxuLy8gICAgICB9LCBmYWxzZSApO1xuLy8gICAgfVxuLy8gIH1cblxuXHRmdW5jdGlvbiBzY3JvbGxQYWdlKCkge1xuXHRcdHZhciBzeSA9IHNjcm9sbFkoKTtcblx0XHRpZiAoIHN5ID49IGNoYW5nZUhlYWRlck9uICkge1xuXHRcdFx0Y2xhc3NpZS5hZGQoIG5hdmJhciwgJ25hdmJhci1waW5uZWQnICk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Y2xhc3NpZS5yZW1vdmUoIG5hdmJhciwgJ25hdmJhci1waW5uZWQnICk7XG5cdFx0fVxuXG5cdFx0ZGlkU2Nyb2xsID0gZmFsc2U7XG5cdH1cblxuXHRmdW5jdGlvbiBzY3JvbGxZKCkge1xuXHRcdHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jRWxlbS5zY3JvbGxUb3A7XG5cdH1cblxuXHRpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuaG9tZS10ZW1wbGF0ZScgKSApIHtcblx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc0MCApIHtcblx0XHRcdGluaXQoKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuY2F0ZWdvcnktdGVtcGxhdGUnICkgKSB7XG5cdFx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmFyY2hpdmUtdGVtcGxhdGUnICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gNzQwICkge1xuXHRcdFx0XHRpbml0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1dGhvci10ZW1wbGF0ZScgKSApIHtcblx0XHRpZiAoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcuYXJjaGl2ZS10ZW1wbGF0ZScgKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPiA3NDAgKSB7XG5cdFx0XHRcdGluaXQoKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxufSkoKTtcbiIsIi8qKlxuICogQ3JlYXRlZCBieSBBc2h1IG9uIDIzLzEwLzE0LlxuICovXG5cbi8qIVxuICogY2xhc3NpZSB2MS4wLjFcbiAqIGNsYXNzIGhlbHBlciBmdW5jdGlvbnNcbiAqIGZyb20gYm9uem8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9ib256b1xuICogTUlUIGxpY2Vuc2VcbiAqXG4gKiBjbGFzc2llLmhhcyggZWxlbSwgJ215LWNsYXNzJyApIC0+IHRydWUvZmFsc2VcbiAqIGNsYXNzaWUuYWRkKCBlbGVtLCAnbXktbmV3LWNsYXNzJyApXG4gKiBjbGFzc2llLnJlbW92ZSggZWxlbSwgJ215LXVud2FudGVkLWNsYXNzJyApXG4gKiBjbGFzc2llLnRvZ2dsZSggZWxlbSwgJ215LWNsYXNzJyApXG4gKi9cblxuLypqc2hpbnQgYnJvd3NlcjogdHJ1ZSwgc3RyaWN0OiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG4vKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlICovXG5cbiggZnVuY3Rpb24oIHdpbmRvdyApIHtcblxuICAndXNlIHN0cmljdCc7XG5cbi8vIGNsYXNzIGhlbHBlciBmdW5jdGlvbnMgZnJvbSBib256byBodHRwczovL2dpdGh1Yi5jb20vZGVkL2JvbnpvXG5cbiAgZnVuY3Rpb24gY2xhc3NSZWcoIGNsYXNzTmFtZSApIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzK3wkKVwiKTtcbiAgfVxuXG4vLyBjbGFzc0xpc3Qgc3VwcG9ydCBmb3IgY2xhc3MgbWFuYWdlbWVudFxuLy8gYWx0aG8gdG8gYmUgZmFpciwgdGhlIGFwaSBzdWNrcyBiZWNhdXNlIGl0IHdvbid0IGFjY2VwdCBtdWx0aXBsZSBjbGFzc2VzIGF0IG9uY2VcbiAgdmFyIGhhc0NsYXNzLCBhZGRDbGFzcywgcmVtb3ZlQ2xhc3M7XG5cbiAgaWYgKCAnY2xhc3NMaXN0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgKSB7XG4gICAgaGFzQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyggYyApO1xuICAgIH07XG4gICAgYWRkQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCggYyApO1xuICAgIH07XG4gICAgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSggYyApO1xuICAgIH07XG4gIH1cbiAgZWxzZSB7XG4gICAgaGFzQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcbiAgICAgIHJldHVybiBjbGFzc1JlZyggYyApLnRlc3QoIGVsZW0uY2xhc3NOYW1lICk7XG4gICAgfTtcbiAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgICAgaWYgKCAhaGFzQ2xhc3MoIGVsZW0sIGMgKSApIHtcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZSArICcgJyArIGM7XG4gICAgICB9XG4gICAgfTtcbiAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xuICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZS5yZXBsYWNlKCBjbGFzc1JlZyggYyApLCAnICcgKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoIGVsZW0sIGMgKSB7XG4gICAgdmFyIGZuID0gaGFzQ2xhc3MoIGVsZW0sIGMgKSA/IHJlbW92ZUNsYXNzIDogYWRkQ2xhc3M7XG4gICAgZm4oIGVsZW0sIGMgKTtcbiAgfVxuXG4gIHZhciBjbGFzc2llID0ge1xuICAgIC8vIGZ1bGwgbmFtZXNcbiAgICBoYXNDbGFzczogaGFzQ2xhc3MsXG4gICAgYWRkQ2xhc3M6IGFkZENsYXNzLFxuICAgIHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcbiAgICB0b2dnbGVDbGFzczogdG9nZ2xlQ2xhc3MsXG4gICAgLy8gc2hvcnQgbmFtZXNcbiAgICBoYXM6IGhhc0NsYXNzLFxuICAgIGFkZDogYWRkQ2xhc3MsXG4gICAgcmVtb3ZlOiByZW1vdmVDbGFzcyxcbiAgICB0b2dnbGU6IHRvZ2dsZUNsYXNzXG4gIH07XG5cbi8vIHRyYW5zcG9ydFxuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcbiAgICAvLyBBTURcbiAgICBkZWZpbmUoIGNsYXNzaWUgKTtcbiAgfSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xuICAgIC8vIENvbW1vbkpTXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBjbGFzc2llO1xuICB9IGVsc2Uge1xuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXG4gICAgd2luZG93LmNsYXNzaWUgPSBjbGFzc2llO1xuICB9XG5cbn0pKCB3aW5kb3cgKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQXNodSBvbiAyMy8xMC8xNC5cbiAqL1xuXG5qUXVlcnkoZnVuY3Rpb24oJCkge1xuICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiTVNJRVwiKSA8IDApIHtcbiAgICAvL0lFOCDkuI3mlK/mjIFjb25zb2xlXG4gICAgY29uc29sZS5sb2coXCJeX14g5oOz5Yqg5YWl56yU5oiI56eR5oqA5byA5Y+R5Zui6Zif77yf6K+35Y+R6YCB6YKu5Lu25YiwIGxpdXhpbmdAbWVpenUuY29tXCIpO1xuICB9XG5cbiAgaWYoJChcImltZy5sYXp5XCIpICYmICQoXCJpbWcubGF6eVwiKS5sZW5ndGggPiAwKVxuICAgICQoXCJpbWcubGF6eVwiKS5sYXp5bG9hZCh7XG4gICAgICBlZmZlY3Q6IFwiZmFkZUluXCIsXG4gICAgICB0aHJlc2hvbGQgOiA1MDBcbiAgICB9KTtcblxuICAkKGRvY3VtZW50KS5yZWFkeSggZnVuY3Rpb24oKSB7XG4gICAgdmFyIHFyY29kZSA9ICQoXCIucXJjb2RlXCIpO1xuICAgICQoXCIuaWNvbi13ZWNoYXRcIikuaG92ZXIoZnVuY3Rpb24oKXtcbiAgICAgIHZhciBwb3MgPSAkKHRoaXMpLnBvc2l0aW9uKCk7XG4gICAgICBxcmNvZGUuY3NzKFwibGVmdFwiLCAoJCh3aW5kb3cpLndpZHRoKCktcXJjb2RlLndpZHRoKCkpLzIpO1xuICAgICAgcXJjb2RlLmNzcyhcInRvcFwiLCBwb3MudG9wLTI3MCk7XG4gICAgICBxcmNvZGUuZmFkZUluKCkuc2hvdygpO1xuICAgIH0sZnVuY3Rpb24oKXtcbiAgICAgIHFyY29kZS5oaWRlKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7IiwiLyohIExhenkgTG9hZCAxLjkuMyAtIE1JVCBsaWNlbnNlIC0gQ29weXJpZ2h0IDIwMTAtMjAxMyBNaWthIFR1dXBvbGEgKi9cbiFmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hKGIpO2EuZm4ubGF6eWxvYWQ9ZnVuY3Rpb24oZil7ZnVuY3Rpb24gZygpe3ZhciBiPTA7aS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtpZighai5za2lwX2ludmlzaWJsZXx8Yy5pcyhcIjp2aXNpYmxlXCIpKWlmKGEuYWJvdmV0aGV0b3AodGhpcyxqKXx8YS5sZWZ0b2ZiZWdpbih0aGlzLGopKTtlbHNlIGlmKGEuYmVsb3d0aGVmb2xkKHRoaXMsail8fGEucmlnaHRvZmZvbGQodGhpcyxqKSl7aWYoKytiPmouZmFpbHVyZV9saW1pdClyZXR1cm4hMX1lbHNlIGMudHJpZ2dlcihcImFwcGVhclwiKSxiPTB9KX12YXIgaCxpPXRoaXMsaj17dGhyZXNob2xkOjAsZmFpbHVyZV9saW1pdDowLGV2ZW50Olwic2Nyb2xsXCIsZWZmZWN0Olwic2hvd1wiLGNvbnRhaW5lcjpiLGRhdGFfYXR0cmlidXRlOlwib3JpZ2luYWxcIixza2lwX2ludmlzaWJsZTohMCxhcHBlYXI6bnVsbCxsb2FkOm51bGwscGxhY2Vob2xkZXI6XCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJDQVlBQUFBZkZjU0pBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNRQUFBN0VBWlVyRGhzQUFBQU5TVVJCVkJoWFl6aDgrUEIvQUFmZkEwbk5QdUNMQUFBQUFFbEZUa1N1UW1DQ1wifTtyZXR1cm4gZiYmKGQhPT1mLmZhaWx1cmVsaW1pdCYmKGYuZmFpbHVyZV9saW1pdD1mLmZhaWx1cmVsaW1pdCxkZWxldGUgZi5mYWlsdXJlbGltaXQpLGQhPT1mLmVmZmVjdHNwZWVkJiYoZi5lZmZlY3Rfc3BlZWQ9Zi5lZmZlY3RzcGVlZCxkZWxldGUgZi5lZmZlY3RzcGVlZCksYS5leHRlbmQoaixmKSksaD1qLmNvbnRhaW5lcj09PWR8fGouY29udGFpbmVyPT09Yj9lOmEoai5jb250YWluZXIpLDA9PT1qLmV2ZW50LmluZGV4T2YoXCJzY3JvbGxcIikmJmguYmluZChqLmV2ZW50LGZ1bmN0aW9uKCl7cmV0dXJuIGcoKX0pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz1hKGIpO2IubG9hZGVkPSExLChjLmF0dHIoXCJzcmNcIik9PT1kfHxjLmF0dHIoXCJzcmNcIik9PT0hMSkmJmMuaXMoXCJpbWdcIikmJmMuYXR0cihcInNyY1wiLGoucGxhY2Vob2xkZXIpLGMub25lKFwiYXBwZWFyXCIsZnVuY3Rpb24oKXtpZighdGhpcy5sb2FkZWQpe2lmKGouYXBwZWFyKXt2YXIgZD1pLmxlbmd0aDtqLmFwcGVhci5jYWxsKGIsZCxqKX1hKFwiPGltZyAvPlwiKS5iaW5kKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGQ9Yy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKTtjLmhpZGUoKSxjLmlzKFwiaW1nXCIpP2MuYXR0cihcInNyY1wiLGQpOmMuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCdcIitkK1wiJylcIiksY1tqLmVmZmVjdF0oai5lZmZlY3Rfc3BlZWQpLGIubG9hZGVkPSEwO3ZhciBlPWEuZ3JlcChpLGZ1bmN0aW9uKGEpe3JldHVybiFhLmxvYWRlZH0pO2lmKGk9YShlKSxqLmxvYWQpe3ZhciBmPWkubGVuZ3RoO2oubG9hZC5jYWxsKGIsZixqKX19KS5hdHRyKFwic3JjXCIsYy5hdHRyKFwiZGF0YS1cIitqLmRhdGFfYXR0cmlidXRlKSl9fSksMCE9PWouZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSYmYy5iaW5kKGouZXZlbnQsZnVuY3Rpb24oKXtiLmxvYWRlZHx8Yy50cmlnZ2VyKFwiYXBwZWFyXCIpfSl9KSxlLmJpbmQoXCJyZXNpemVcIixmdW5jdGlvbigpe2coKX0pLC8oPzppcGhvbmV8aXBvZHxpcGFkKS4qb3MgNS9naS50ZXN0KG5hdmlnYXRvci5hcHBWZXJzaW9uKSYmZS5iaW5kKFwicGFnZXNob3dcIixmdW5jdGlvbihiKXtiLm9yaWdpbmFsRXZlbnQmJmIub3JpZ2luYWxFdmVudC5wZXJzaXN0ZWQmJmkuZWFjaChmdW5jdGlvbigpe2EodGhpcykudHJpZ2dlcihcImFwcGVhclwiKX0pfSksYShjKS5yZWFkeShmdW5jdGlvbigpe2coKX0pLHRoaXN9LGEuYmVsb3d0aGVmb2xkPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/KGIuaW5uZXJIZWlnaHQ/Yi5pbm5lckhlaWdodDplLmhlaWdodCgpKStlLnNjcm9sbFRvcCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLnRvcCthKGYuY29udGFpbmVyKS5oZWlnaHQoKSxnPD1hKGMpLm9mZnNldCgpLnRvcC1mLnRocmVzaG9sZH0sYS5yaWdodG9mZm9sZD1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uud2lkdGgoKStlLnNjcm9sbExlZnQoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS5sZWZ0K2EoZi5jb250YWluZXIpLndpZHRoKCksZzw9YShjKS5vZmZzZXQoKS5sZWZ0LWYudGhyZXNob2xkfSxhLmFib3ZldGhldG9wPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS5zY3JvbGxUb3AoKTphKGYuY29udGFpbmVyKS5vZmZzZXQoKS50b3AsZz49YShjKS5vZmZzZXQoKS50b3ArZi50aHJlc2hvbGQrYShjKS5oZWlnaHQoKX0sYS5sZWZ0b2ZiZWdpbj1mdW5jdGlvbihjLGYpe3ZhciBnO3JldHVybiBnPWYuY29udGFpbmVyPT09ZHx8Zi5jb250YWluZXI9PT1iP2Uuc2Nyb2xsTGVmdCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLmxlZnQsZz49YShjKS5vZmZzZXQoKS5sZWZ0K2YudGhyZXNob2xkK2EoYykud2lkdGgoKX0sYS5pbnZpZXdwb3J0PWZ1bmN0aW9uKGIsYyl7cmV0dXJuIShhLnJpZ2h0b2Zmb2xkKGIsYyl8fGEubGVmdG9mYmVnaW4oYixjKXx8YS5iZWxvd3RoZWZvbGQoYixjKXx8YS5hYm92ZXRoZXRvcChiLGMpKX0sYS5leHRlbmQoYS5leHByW1wiOlwiXSx7XCJiZWxvdy10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImFib3ZlLXRoZS10b3BcIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5iZWxvd3RoZWZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJyaWdodC1vZi1zY3JlZW5cIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2Ytc2NyZWVuXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX0sXCJpbi12aWV3cG9ydFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLmludmlld3BvcnQoYix7dGhyZXNob2xkOjB9KX0sXCJhYm92ZS10aGUtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcInJpZ2h0LW9mLWZvbGRcIjpmdW5jdGlvbihiKXtyZXR1cm4gYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImxlZnQtb2YtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpOyIsInZhciBNZW51ID0ge1xuICBzZXR0aW5nczoge1xuICAgIG1lbnVCdG46ICQoXCIuanMtbWVudUJ0blwiKSxcbiAgICBtZW51OiAkKFwiLmpzLW1lbnVcIiksXG4gICAgY2xvc2VCdG46ICQoXCIuanMtY2xvc2VCdG5cIiksXG4gICAgYmc6ICQoXCIuanMtQmdcIiksXG4gICAgY29udGFpbmVyOiAkKFwiLmpzLW1lbnVDb250YWluZXJcIiksXG4gICAgaXNPcGVuOiAhMSxcbiAgICBpc0FuaW1hdGluZzogITFcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYmluZFVJQWN0aW9ucygpXG4gIH0sXG4gIGJpbmRVSUFjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5tZW51QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTWVudS50b2dnbGUoKVxuICAgIH0pO1xuICAgIGUuYmcuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIE1lbnUuY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LmNsb3NlKClcbiAgICB9KTtcbiAgICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBNZW51LmNsb3NlKClcbiAgICB9KVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5pc09wZW4gPyBNZW51LmNsb3NlKCkgOiBNZW51Lm9wZW4oKVxuICB9LFxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgZS5tZW51LmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICB9XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICBlLmlzT3BlbiA9ICEwO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgIGUubWVudS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgIHNldFRpbWVvdXQodCwgMTAwKVxuICAgIH1cbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICBlLm1lbnUuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgIH1cbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgIGUuaXNPcGVuID0gITE7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgZS5tZW51LnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXG4gICAgfVxuICB9XG59LCBTZWFyY2ggPSB7XG4gIHNldHRpbmdzOiB7XG4gICAgICB0ZXh0Qm94OiAkKFwiLnRleHRib3hcIiksXG4gICAgICBzZWFyY2hCdG46ICQoXCIuanMtc2VhcmNoQnRuXCIpLFxuICAgICAgc2VhcmNoOiAkKFwiLmpzLXNlYXJjaFwiKSxcbiAgICAgIGNsb3NlQnRuOiAkKFwiLmpzLWNsb3NlQnRuXCIpLFxuICAgICAgYmc6ICQoXCIuanMtQmdcIiksXG4gICAgICBjb250YWluZXI6ICQoXCIuanMtc2VhcmNoQ29udGFpbmVyXCIpLFxuICAgICAgaXNPcGVuOiAhMSxcbiAgICAgIGlzQW5pbWF0aW5nOiAhMVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmJpbmRVSUFjdGlvbnMoKVxuICB9LFxuICBiaW5kVUlBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGUuc2VhcmNoQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLnRvZ2dsZSgpXG4gICAgfSk7XG4gICAgLy8g5aSE55CG5pCc57Si5qGG6Zi75q2i5YaS5rOhXG4gICAgZS50ZXh0Qm94LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC5jbG9zZSgpXG4gICAgfSk7XG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PT0gMjcgJiYgU2VhcmNoLmNsb3NlKClcbiAgICB9KVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICAgIGUuaXNPcGVuID8gU2VhcmNoLmNsb3NlKCkgOiBTZWFyY2gub3BlbigpXG4gIH0sXG4gIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgZS5zZWFyY2guYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgICAgZS50ZXh0Qm94LmZvY3VzKCk7XG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgICB9XG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgICBlLmlzT3BlbiA9ICEwO1xuICAgICAgICAgIGUuc2VhcmNoLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEwMClcbiAgICAgIH1cblxuICB9LFxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgICBlLnNlYXJjaC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICAgIH1cbiAgICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICAgIGUuaXNPcGVuID0gITE7XG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICEwO1xuICAgICAgICAgIGUuc2VhcmNoLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICAgIHNldFRpbWVvdXQodCwgMTIwMClcbiAgICAgIH1cbiAgfVxufTtcblxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIE1lbnUuaW5pdCgpO1xuICBTZWFyY2guaW5pdCgpO1xufSk7XG4iLCJ2YXIgc2Nyb2xsdG90b3A9e1xyXG5cclxuICAgIC8vc3RhcnRsaW5lOiBJbnRlZ2VyLiBOdW1iZXIgb2YgcGl4ZWxzIGZyb20gdG9wIG9mIGRvYyBzY3JvbGxiYXIgaXMgc2Nyb2xsZWQgYmVmb3JlIHNob3dpbmcgY29udHJvbFxyXG5cclxuICAgIC8vc2Nyb2xsdG86IEtleXdvcmQgKEludGVnZXIsIG9yIFwiU2Nyb2xsX3RvX0VsZW1lbnRfSURcIikuIEhvdyBmYXIgdG8gc2Nyb2xsIGRvY3VtZW50IHVwIHdoZW4gY29udHJvbCBpcyBjbGlja2VkIG9uICgwPXRvcCkuXHJcblxyXG4gICAgc2V0dGluZzoge3N0YXJ0bGluZToxMDAsIHNjcm9sbHRvOiAwLCBzY3JvbGxkdXJhdGlvbjoxMDAwLCBmYWRlZHVyYXRpb246WzUwMCwgMTAwXX0sXHJcblxyXG4gICAgY29udHJvbEhUTUw6IFwiPGRpdiBpZD0ndG9Ub3AnIGNsYXNzPSdpY29uLXVwJz48L2Rpdj5cIiwgLy9IVE1MIGZvciBjb250cm9sLCB3aGljaCBpcyBhdXRvIHdyYXBwZWQgaW4gRElWIHcvIElEPVwidG9wY29udHJvbFwiXHJcblxyXG4gICAgY29udHJvbGF0dHJzOiB7b2Zmc2V0eDo1LCBvZmZzZXR5OjV9LCAvL29mZnNldCBvZiBjb250cm9sIHJlbGF0aXZlIHRvIHJpZ2h0LyBib3R0b20gb2Ygd2luZG93IGNvcm5lclxyXG5cclxuICAgIGFuY2hvcmtleXdvcmQ6ICcjdG9wJywgLy9FbnRlciBocmVmIHZhbHVlIG9mIEhUTUwgYW5jaG9ycyBvbiB0aGUgcGFnZSB0aGF0IHNob3VsZCBhbHNvIGFjdCBhcyBcIlNjcm9sbCBVcFwiIGxpbmtzXHJcblxyXG4gc3RhdGU6IHtpc3Zpc2libGU6ZmFsc2UsIHNob3VsZHZpc2libGU6ZmFsc2V9LFxyXG5cclxuXHJcbiAgICBzY3JvbGx1cDpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY3NzZml4ZWRzdXBwb3J0KSAvL2lmIGNvbnRyb2wgaXMgcG9zaXRpb25lZCB1c2luZyBKYXZhU2NyaXB0XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRjb250cm9sLmNzcyh7b3BhY2l0eTowfSkgLy9oaWRlIGNvbnRyb2wgaW1tZWRpYXRlbHkgYWZ0ZXIgY2xpY2tpbmcgaXRcclxuXHJcbiAgICAgICAgdmFyIGRlc3Q9aXNOYU4odGhpcy5zZXR0aW5nLnNjcm9sbHRvKT8gdGhpcy5zZXR0aW5nLnNjcm9sbHRvIDogcGFyc2VJbnQodGhpcy5zZXR0aW5nLnNjcm9sbHRvKVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGRlc3Q9PVwic3RyaW5nXCIgJiYgalF1ZXJ5KCcjJytkZXN0KS5sZW5ndGg9PTEpIC8vY2hlY2sgZWxlbWVudCBzZXQgYnkgc3RyaW5nIGV4aXN0c1xyXG5cclxuICAgICAgICAgICAgZGVzdD1qUXVlcnkoJyMnK2Rlc3QpLm9mZnNldCgpLnRvcFxyXG5cclxuICAgICAgICBlbHNlXHJcblxyXG4gICAgICAgICAgICBkZXN0PTBcclxuXHJcbiAgICAgICAgdGhpcy4kYm9keS5hbmltYXRlKHtzY3JvbGxUb3A6IGRlc3R9LCB0aGlzLnNldHRpbmcuc2Nyb2xsZHVyYXRpb24pO1xyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIGtlZXBmaXhlZDpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICB2YXIgJHdpbmRvdz1qUXVlcnkod2luZG93KVxyXG5cclxuICAgICAgICB2YXIgY29udHJvbHg9JHdpbmRvdy5zY3JvbGxMZWZ0KCkgKyAkd2luZG93LndpZHRoKCkgLSB0aGlzLiRjb250cm9sLndpZHRoKCkgLSB0aGlzLmNvbnRyb2xhdHRycy5vZmZzZXR4XHJcblxyXG4gICAgICAgIHZhciBjb250cm9seT0kd2luZG93LnNjcm9sbFRvcCgpICsgJHdpbmRvdy5oZWlnaHQoKSAtIHRoaXMuJGNvbnRyb2wuaGVpZ2h0KCkgLSB0aGlzLmNvbnRyb2xhdHRycy5vZmZzZXR5XHJcblxyXG4gICAgICAgIHRoaXMuJGNvbnRyb2wuY3NzKHtsZWZ0OmNvbnRyb2x4KydweCcsIHRvcDpjb250cm9seSsncHgnfSlcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICB0b2dnbGVjb250cm9sOmZ1bmN0aW9uKCl7XHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbHRvcD1qUXVlcnkod2luZG93KS5zY3JvbGxUb3AoKVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY3NzZml4ZWRzdXBwb3J0KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5rZWVwZml4ZWQoKVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRlLnNob3VsZHZpc2libGU9KHNjcm9sbHRvcD49dGhpcy5zZXR0aW5nLnN0YXJ0bGluZSk/IHRydWUgOiBmYWxzZVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG91bGR2aXNpYmxlICYmICF0aGlzLnN0YXRlLmlzdmlzaWJsZSl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRjb250cm9sLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OjF9LCB0aGlzLnNldHRpbmcuZmFkZWR1cmF0aW9uWzBdKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc3Zpc2libGU9dHJ1ZVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuc2hvdWxkdmlzaWJsZT09ZmFsc2UgJiYgdGhpcy5zdGF0ZS5pc3Zpc2libGUpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTowfSwgdGhpcy5zZXR0aW5nLmZhZGVkdXJhdGlvblsxXSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXN2aXNpYmxlPWZhbHNlXHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCl7XHJcbiAgICAgICAgICAgIHZhciBtYWlub2JqPXNjcm9sbHRvdG9wXHJcbiAgICAgICAgICAgIHZhciBpZWJyd3M9ZG9jdW1lbnQuYWxsXHJcbiAgICAgICAgICAgIG1haW5vYmouY3NzZml4ZWRzdXBwb3J0PSFpZWJyd3MgfHwgaWVicndzICYmIGRvY3VtZW50LmNvbXBhdE1vZGU9PVwiQ1NTMUNvbXBhdFwiICYmIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAvL25vdCBJRSBvciBJRTcrIGJyb3dzZXJzIGluIHN0YW5kYXJkcyBtb2RlXHJcbiAgICAgICAgICAgIG1haW5vYmouJGJvZHk9KHdpbmRvdy5vcGVyYSk/IChkb2N1bWVudC5jb21wYXRNb2RlPT1cIkNTUzFDb21wYXRcIj8gJCgnaHRtbCcpIDogJCgnYm9keScpKSA6ICQoJ2h0bWwsYm9keScpXHJcbiAgICAgICAgICAgIG1haW5vYmouJGNvbnRyb2w9JCgnPGRpdiBpZD1cInRvcGNvbnRyb2xcIj4nK21haW5vYmouY29udHJvbEhUTUwrJzwvZGl2PicpXHJcbiAgICAgICAgICAgICAgICAuY3NzKHtwb3NpdGlvbjptYWlub2JqLmNzc2ZpeGVkc3VwcG9ydD8gJ2ZpeGVkJyA6ICdhYnNvbHV0ZScsIGJvdHRvbTptYWlub2JqLmNvbnRyb2xhdHRycy5vZmZzZXR5LCByaWdodDptYWlub2JqLmNvbnRyb2xhdHRycy5vZmZzZXR4LCBvcGFjaXR5OjAsY3Vyc29yOidwb2ludGVyJ30pXHJcbiAgICAgICAgICAgICAgICAuYXR0cih7dGl0bGU6J1Njcm9sbCB0byBUb3AnfSlcclxuICAgICAgICAgICAgICAgIC5jbGljayhmdW5jdGlvbigpe21haW5vYmouc2Nyb2xsdXAoKTsgcmV0dXJuIGZhbHNlfSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbygnYm9keScpXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBtYWlub2JqLiRjb250cm9sLnRleHQoKSE9JycpIC8vbG9vc2UgY2hlY2sgZm9yIElFNiBhbmQgYmVsb3csIHBsdXMgd2hldGhlciBjb250cm9sIGNvbnRhaW5zIGFueSB0ZXh0XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLiRjb250cm9sLmNzcyh7d2lkdGg6bWFpbm9iai4kY29udHJvbC53aWR0aCgpfSkgLy9JRTYtIHNlZW1zIHRvIHJlcXVpcmUgYW4gZXhwbGljaXQgd2lkdGggb24gYSBESVYgY29udGFpbmluZyB0ZXh0XHJcbiAgICAgICAgICAgIG1haW5vYmoudG9nZ2xlY29udHJvbCgpXHJcblxyXG4kKCdhW2hyZWY9XCInICsgbWFpbm9iai5hbmNob3JrZXl3b3JkICsnXCJdJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIG1haW5vYmouc2Nyb2xsdXAoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQod2luZG93KS5iaW5kKCdzY3JvbGwgcmVzaXplJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLnRvZ2dsZWNvbnRyb2woKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuc2Nyb2xsdG90b3AuaW5pdCgpO1xyXG4iLCJcbihmdW5jdGlvbiAoJCkge1xuICBcInVzZSBzdHJpY3RcIjtcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAkKFwiLnNjcm9sbC1kb3duXCIpLmFyY3RpY19zY3JvbGwoKTtcblxuICB9KTtcbn0oalF1ZXJ5KSk7XG5cbihmdW5jdGlvbiAoJCkge1xuICAkLmZuLmFyY3RpY19zY3JvbGwgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgZWxlbTogJCh0aGlzKSxcbiAgICAgIHNwZWVkOiA1MDBcbiAgICB9O1xuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgb3B0aW9ucy5lbGVtLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgb2Zmc2V0ID0gKCQodGhpcykuYXR0cignZGF0YS1vZmZzZXQnKSkgPyAkKHRoaXMpLmF0dHIoJ2RhdGEtb2Zmc2V0JykgOiBmYWxzZSxcbiAgICAgICAgcG9zaXRpb24gPSAoJCh0aGlzKS5hdHRyKCdkYXRhLXBvc2l0aW9uJykpID8gJCh0aGlzKS5hdHRyKCdkYXRhLXBvc2l0aW9uJykgOiBmYWxzZTtcbiAgICAgIGlmIChvZmZzZXQpIHtcbiAgICAgICAgdmFyIHRvTW92ZSA9IHBhcnNlSW50KG9mZnNldCk7XG4gICAgICAgICQoJ2h0bWwsYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLmFuaW1hdGUoe3Njcm9sbFRvcDogKCQodGhpcy5oYXNoKS5vZmZzZXQoKS50b3AgKyB0b01vdmUpIH0sIG9wdGlvbnMuc3BlZWQpO1xuICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbikge1xuICAgICAgICB2YXIgdG9Nb3ZlID0gcGFyc2VJbnQocG9zaXRpb24pO1xuICAgICAgICAkKCdodG1sLGJvZHknKS5zdG9wKHRydWUsIGZhbHNlKS5hbmltYXRlKHtzY3JvbGxUb3A6IHRvTW92ZSB9LCBvcHRpb25zLnNwZWVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJ2h0bWwsYm9keScpLnN0b3AodHJ1ZSwgZmFsc2UpLmFuaW1hdGUoe3Njcm9sbFRvcDogKCQodGhpcy5oYXNoKS5vZmZzZXQoKS50b3ApIH0sIG9wdGlvbnMuc3BlZWQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIH07XG59KShqUXVlcnkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==