!function(t){"use strict";function n(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function i(t,n){var i=o(t,n)?e:s;i(t,n)}var o,s,e;"classList"in document.documentElement?(o=function(t,n){return t.classList.contains(n)},s=function(t,n){t.classList.add(n)},e=function(t,n){t.classList.remove(n)}):(o=function(t,i){return n(i).test(t.className)},s=function(t,n){o(t,n)||(t.className=t.className+" "+n)},e=function(t,i){t.className=t.className.replace(n(i)," ")});var c={hasClass:o,addClass:s,removeClass:e,toggleClass:i,has:o,add:s,remove:e,toggle:i};"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c:t.classie=c}(window),jQuery(function(t){navigator.userAgent.indexOf("MSIE")<0&&console.log("^_^ 想加入笔戈科技开发团队？请发送邮件到 liuxing@meizu.com"),t("img.lazy")&&t("img.lazy").length>0&&t("img.lazy").lazyload({effect:"fadeIn"}),t(document).ready(function(){var n=t(".qrcode");t(".icon-wechat").hover(function(){var i=t(this).position();n.css("left",(t(window).width()-n.width())/2),n.css("top",i.top-270),n.fadeIn().show()},function(){n.hide()})})});var Menu={settings:{menuBtn:$(".js-menuBtn"),menu:$(".js-menu"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-menuContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.menuBtn.click(function(){Menu.toggle()}),t.bg.click(function(){Menu.close()}),t.container.click(function(){Menu.close()}),t.closeBtn.click(function(){Menu.close()}),$(window).keydown(function(t){27===t.which&&Menu.close()})},toggle:function(){var t=this.settings;t.isOpen?Menu.close():Menu.open()},open:function(){function t(){n.menu.addClass("is-active"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!0,n.isAnimating=!0,n.menu.css("display","block"),setTimeout(t,100))},close:function(){function t(){n.menu.css("display","none"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!1,n.isAnimating=!0,n.menu.removeClass("is-active"),setTimeout(t,1200))}},Search={settings:{textBox:$(".textbox"),searchBtn:$(".js-searchBtn"),search:$(".js-search"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-searchContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.searchBtn.click(function(){Search.toggle()}),t.textBox.click(function(){return!1}),t.bg.click(function(){Search.close()}),t.container.click(function(){Search.close()}),t.closeBtn.click(function(){Search.close()}),$(window).keydown(function(t){27===t.which&&Search.close()})},toggle:function(){var t=this.settings;t.isOpen?Search.close():Search.open()},open:function(){function t(){n.search.addClass("is-active"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!0,n.search.css("display","block"),setTimeout(t,100))},close:function(){function t(){n.search.css("display","none"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!1,n.isAnimating=!0,n.search.removeClass("is-active"),setTimeout(t,1200))}},Tag={settings:{tagBtn:$(".js-tagBtn"),tag:$(".js-tags"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-tagContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.tagBtn.click(function(){Tag.toggle()}),t.bg.click(function(){Tag.close()}),t.container.click(function(){Tag.close()}),t.closeBtn.click(function(){Tag.close()}),$(window).keydown(function(t){27===t.which&&Tag.close()})},toggle:function(){var t=this.settings;t.isOpen?Tag.close():Tag.open()},open:function(){function t(){n.tag.addClass("is-active"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!0,n.isAnimating=!0,n.tag.css("display","block"),setTimeout(t,100))},close:function(){function t(){n.tag.css("display","none"),n.isAnimating=!1}var n=this.settings;n.isAnimating===!1&&(n.isOpen=!1,n.isAnimating=!0,n.tag.removeClass("is-active"),setTimeout(t,1200))}};$(document).ready(function(){Menu.init(),Search.init(),Tag.init()});var scrolltotop={setting:{startline:100,scrollto:0,scrollduration:1e3,fadeduration:[500,100]},controlHTML:"<div id='toTop' class='icon-up'></div>",controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var t=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);t="string"==typeof t&&1==jQuery("#"+t).length?jQuery("#"+t).offset().top:0,this.$body.animate({scrollTop:t},this.setting.scrollduration)},keepfixed:function(){var t=jQuery(window),n=t.scrollLeft()+t.width()-this.$control.width()-this.controlattrs.offsetx,i=t.scrollTop()+t.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:n+"px",top:i+"px"})},togglecontrol:function(){var t=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=t>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(t){var n=scrolltotop,i=document.all;n.cssfixedsupport=!i||i&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,n.$body=window.opera?"CSS1Compat"==document.compatMode?t("html"):t("body"):t("html,body"),n.$control=t('<div id="topcontrol">'+n.controlHTML+"</div>").css({position:n.cssfixedsupport?"fixed":"absolute",bottom:n.controlattrs.offsety,right:n.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll to Top"}).click(function(){return n.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=n.$control.text()&&n.$control.css({width:n.$control.width()}),n.togglecontrol(),t('a[href="'+n.anchorkeyword+'"]').click(function(){return n.scrollup(),!1}),t(window).bind("scroll resize",function(){n.togglecontrol()})})}};scrolltotop.init(),function(){function t(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1}function n(n){for(var i=h.length;i--;)if(n.keyCode===h[i])return t(n),void 0}function i(n){t(n)}function o(){}function s(){window.onmousewheel=document.onmousewheel=o,document.onkeydown=n,document.body.ontouchmove=i}function e(){window.onmousewheel=document.onmousewheel=document.onkeydown=document.body.ontouchmove=null}function c(){return window.pageYOffset||m.scrollTop}function a(){if(r=c(),d&&!g){if(0>r)return!1;window.scrollTo(0,0)}return f?!1:(0>=r&&u?l(0):r>0&&!u&&l(1),void 0)}function l(t){f=!0,t?classie.add(p,"modify"):(d=!0,s(),classie.remove(p,"modify")),setTimeout(function(){u=!u,f=!1,t&&(d=!1,e())},600)}var r,u,d,f,g=function(){var t,n=-1,i=window.navigator.userAgent,o=i.indexOf("MSIE "),s=i.indexOf("Trident/");if(o>0)n=parseInt(i.substring(o+5,i.indexOf(".",o)),10);else if(s>0){var e=i.indexOf("rv:");n=parseInt(i.substring(e+3,i.indexOf(".",e)),10)}return n>-1?n:t}(),h=[32,37,38,39,40],m=window.document.documentElement,p=document.getElementById("topScroll"),v=c();d=0===v,v&&(u=!0,classie.add(p,"modify")),navigator.userAgent.indexOf("MSIE 9.0")>0&&document.body.clientWidth>768&&window.addEventListener("scroll",a)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzaWUuanMiLCJpbmRleC5qcyIsIm5hdmJhci5qcyIsInJldHVyblRvcC5qcyIsInRvcFNjcm9sbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQ0FlQSxTQUFBLEdBRUEsWUFJQSxTQUFBLEdBQUEsR0FDQSxNQUFBLElBQUEsUUFBQSxXQUFBLEVBQUEsWUFnQ0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEdBQUEsRUFBQSxDQUNBLEdBQUEsRUFBQSxHQTdCQSxHQUFBLEdBQUEsRUFBQSxDQUVBLGNBQUEsVUFBQSxpQkFDQSxFQUFBLFNBQUEsRUFBQSxHQUNBLE1BQUEsR0FBQSxVQUFBLFNBQUEsSUFFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxJQUFBLElBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLFVBQUEsT0FBQSxNQUlBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEdBQUEsS0FBQSxFQUFBLFlBRUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEVBQUEsS0FDQSxFQUFBLFVBQUEsRUFBQSxVQUFBLElBQUEsSUFHQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxFQUFBLFVBQUEsUUFBQSxFQUFBLEdBQUEsTUFTQSxJQUFBLElBRUEsU0FBQSxFQUNBLFNBQUEsRUFDQSxZQUFBLEVBQ0EsWUFBQSxFQUVBLElBQUEsRUFDQSxJQUFBLEVBQ0EsT0FBQSxFQUNBLE9BQUEsRUFJQSxtQkFBQSxTQUFBLE9BQUEsSUFFQSxPQUFBLEdBQ0EsZ0JBQUEsU0FFQSxPQUFBLFFBQUEsRUFHQSxFQUFBLFFBQUEsR0FHQSxRQ3BGQSxPQUFBLFNBQUEsR0FDQSxVQUFBLFVBQUEsUUFBQSxRQUFBLEdBRUEsUUFBQSxJQUFBLDRDQUdBLEVBQUEsYUFBQSxFQUFBLFlBQUEsT0FBQSxHQUNBLEVBQUEsWUFBQSxVQUFBLE9BQUEsV0FFQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxnQkFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxVQUNBLEdBQUEsSUFBQSxRQUFBLEVBQUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsSUFBQSxLQUNBLEVBQUEsU0FBQSxRQUNBLFdBQ0EsRUFBQSxZQ2pCQSxJQUFBLE9BQ0EsVUFDQSxRQUFBLEVBQUEsZUFDQSxLQUFBLEVBQUEsWUFDQSxTQUFBLEVBQUEsZ0JBQ0EsR0FBQSxFQUFBLFVBQ0EsVUFBQSxFQUFBLHFCQUNBLFFBQUEsRUFDQSxhQUFBLEdBRUEsS0FBQSxXQUNBLEtBQUEsaUJBRUEsY0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxRQUFBLE1BQUEsV0FDQSxLQUFBLFdBRUEsRUFBQSxHQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxTQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxPQUFBLEtBQUEsV0FHQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsS0FBQSxRQUFBLEtBQUEsUUFFQSxLQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsS0FBQSxTQUFBLGFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsSUFBQSxVQUFBLFNBQ0EsV0FBQSxFQUFBLE9BR0EsTUFBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLEtBQUEsSUFBQSxVQUFBLFFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsWUFBQSxhQUNBLFdBQUEsRUFBQSxTQUdBLFFBQ0EsVUFDQSxRQUFBLEVBQUEsWUFDQSxVQUFBLEVBQUEsaUJBQ0EsT0FBQSxFQUFBLGNBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSx1QkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsVUFBQSxNQUFBLFdBQ0EsT0FBQSxXQUdBLEVBQUEsUUFBQSxNQUFBLFdBQ0EsT0FBQSxJQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxPQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLE9BQUEsUUFBQSxPQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLE9BQUEsU0FBQSxhQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxPQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUdBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxPQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsU0FLQSxLQUNBLFVBQ0EsT0FBQSxFQUFBLGNBQ0EsSUFBQSxFQUFBLFlBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSxvQkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxNQUFBLFdBQ0EsSUFBQSxXQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxJQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLElBQUEsUUFBQSxJQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLElBQUEsU0FBQSxhQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxJQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUdBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxJQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxJQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsUUFLQSxHQUFBLFVBQUEsTUFBQSxXQUNBLEtBQUEsT0FDQSxPQUFBLE9BQ0EsSUFBQSxRQ2xNQSxJQUFBLGNBTUEsU0FBQSxVQUFBLElBQUEsU0FBQSxFQUFBLGVBQUEsSUFBQSxjQUFBLElBQUEsTUFFQSxZQUFBLHlDQUVBLGNBQUEsUUFBQSxFQUFBLFFBQUEsR0FFQSxjQUFBLE9BRUEsT0FBQSxXQUFBLEVBQUEsZUFBQSxHQUdBLFNBQUEsV0FFQSxLQUFBLGlCQUVBLEtBQUEsU0FBQSxLQUFBLFFBQUEsR0FFQSxJQUFBLEdBQUEsTUFBQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsU0FBQSxTQUFBLEtBQUEsUUFBQSxTQUlBLEdBRkEsZ0JBQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxHQUFBLE9BRUEsT0FBQSxJQUFBLEdBQUEsU0FBQSxJQUlBLEVBRUEsS0FBQSxNQUFBLFNBQUEsVUFBQSxHQUFBLEtBQUEsUUFBQSxpQkFLQSxVQUFBLFdBRUEsR0FBQSxHQUFBLE9BQUEsUUFFQSxFQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsS0FBQSxTQUFBLFFBQUEsS0FBQSxhQUFBLFFBRUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxTQUFBLEtBQUEsU0FBQSxTQUFBLEtBQUEsYUFBQSxPQUVBLE1BQUEsU0FBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxRQUtBLGNBQUEsV0FJQSxHQUFBLEdBQUEsT0FBQSxRQUFBLFdBRUEsTUFBQSxpQkFFQSxLQUFBLFlBRUEsS0FBQSxNQUFBLGNBQUEsR0FBQSxLQUFBLFFBQUEsV0FBQSxHQUFBLEVBRUEsS0FBQSxNQUFBLGdCQUFBLEtBQUEsTUFBQSxXQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsR0FJQSxHQUFBLEtBQUEsTUFBQSxlQUFBLEtBQUEsTUFBQSxZQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsSUFLQSxLQUFBLFdBQ0EsT0FBQSxVQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxZQUNBLEVBQUEsU0FBQSxHQUNBLEdBQUEsaUJBQUEsR0FBQSxHQUFBLGNBQUEsU0FBQSxZQUFBLE9BQUEsZUFDQSxFQUFBLE1BQUEsT0FBQSxNQUFBLGNBQUEsU0FBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxhQUNBLEVBQUEsU0FBQSxFQUFBLHdCQUFBLEVBQUEsWUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLGdCQUFBLFFBQUEsV0FBQSxPQUFBLEVBQUEsYUFBQSxRQUFBLE1BQUEsRUFBQSxhQUFBLFFBQUEsUUFBQSxFQUFBLE9BQUEsWUFDQSxNQUFBLE1BQUEsa0JBQ0EsTUFBQSxXQUFBLE1BQUEsR0FBQSxZQUFBLElBQ0EsU0FBQSxRQUNBLFNBQUEsTUFBQSxPQUFBLGdCQUFBLElBQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLGdCQUVBLEVBQUEsV0FBQSxFQUFBLGNBQUEsTUFBQSxNQUFBLFdBRUEsTUFEQSxHQUFBLFlBQ0EsSUFFQSxFQUFBLFFBQUEsS0FBQSxnQkFBQSxXQUNBLEVBQUEscUJBS0EsYUFBQSxPQ3hHQSxXQTJCQSxRQUFBLEdBQUEsR0FDQSxFQUFBLEdBQUEsT0FBQSxNQUNBLEVBQUEsZ0JBQ0EsRUFBQSxpQkFDQSxFQUFBLGFBQUEsRUFHQSxRQUFBLEdBQUEsR0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsS0FDQSxHQUFBLEVBQUEsVUFBQSxFQUFBLEdBRUEsTUFEQSxHQUFBLEdBQ0EsT0FLQSxRQUFBLEdBQUEsR0FDQSxFQUFBLEdBR0EsUUFBQSxNQU9BLFFBQUEsS0FDQSxPQUFBLGFBQUEsU0FBQSxhQUFBLEVBQ0EsU0FBQSxVQUFBLEVBQ0EsU0FBQSxLQUFBLFlBQUEsRUFHQSxRQUFBLEtBQ0EsT0FBQSxhQUFBLFNBQUEsYUFBQSxTQUFBLFVBQUEsU0FBQSxLQUFBLFlBQUEsS0FVQSxRQUFBLEtBQ0EsTUFBQSxRQUFBLGFBQUEsRUFBQSxVQUdBLFFBQUEsS0FHQSxHQUZBLEVBQUEsSUFFQSxJQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsRUFBQSxPQUFBLENBRUEsUUFBQSxTQUFBLEVBQUEsR0FHQSxNQUFBLElBQ0EsR0FHQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBRUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxHQUpBLFFBUUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxFQUVBLEVBQ0EsUUFBQSxJQUFBLEVBQUEsV0FFQSxHQUFBLEVBQ0EsSUFDQSxRQUFBLE9BQUEsRUFBQSxXQUlBLFdBQUEsV0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLElBQ0EsR0FBQSxFQUNBLE1BRUEsS0FoSEEsR0E4REEsR0FDQSxFQUNBLEVBQ0EsRUFqRUEsRUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxPQUFBLFVBQUEsVUFDQSxFQUFBLEVBQUEsUUFBQSxTQUNBLEVBQUEsRUFBQSxRQUFBLFdBRUEsSUFBQSxFQUFBLEVBRUEsRUFBQSxTQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLElBQUEsSUFBQSxRQUNBLElBQUEsRUFBQSxFQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsUUFBQSxNQUNBLEdBQUEsU0FBQSxFQUFBLFVBQUEsRUFBQSxFQUFBLEVBQUEsUUFBQSxJQUFBLElBQUEsSUFHQSxNQUFBLEdBQUEsR0FBQSxFQUFBLEtBT0EsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBdUNBLEVBQUEsT0FBQSxTQUFBLGdCQUtBLEVBQUEsU0FBQSxlQUFBLGFBa0RBLEVBQUEsR0FDQSxHQUFBLElBQUEsRUFJQSxJQUNBLEdBQUEsRUFDQSxRQUFBLElBQUEsRUFBQSxXQUdBLFVBQUEsVUFBQSxRQUFBLFlBQUEsR0FDQSxTQUFBLEtBQUEsWUFBQSxLQUNBLE9BQUEsaUJBQUEsU0FBQSIsImZpbGUiOiJiaWdlcnRlY2gubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIGNsYXNzaWUgdjEuMC4xXHJcbiAqIGNsYXNzIGhlbHBlciBmdW5jdGlvbnNcclxuICogZnJvbSBib256byBodHRwczovL2dpdGh1Yi5jb20vZGVkL2JvbnpvXHJcbiAqIE1JVCBsaWNlbnNlXHJcbiAqXHJcbiAqIGNsYXNzaWUuaGFzKCBlbGVtLCAnbXktY2xhc3MnICkgLT4gdHJ1ZS9mYWxzZVxyXG4gKiBjbGFzc2llLmFkZCggZWxlbSwgJ215LW5ldy1jbGFzcycgKVxyXG4gKiBjbGFzc2llLnJlbW92ZSggZWxlbSwgJ215LXVud2FudGVkLWNsYXNzJyApXHJcbiAqIGNsYXNzaWUudG9nZ2xlKCBlbGVtLCAnbXktY2xhc3MnIClcclxuICovXHJcblxyXG4vKmpzaGludCBicm93c2VyOiB0cnVlLCBzdHJpY3Q6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUgKi9cclxuLypnbG9iYWwgZGVmaW5lOiBmYWxzZSwgbW9kdWxlOiBmYWxzZSAqL1xyXG5cclxuKCBmdW5jdGlvbiggd2luZG93ICkge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4vLyBjbGFzcyBoZWxwZXIgZnVuY3Rpb25zIGZyb20gYm9uem8gaHR0cHM6Ly9naXRodWIuY29tL2RlZC9ib256b1xyXG5cclxuICBmdW5jdGlvbiBjbGFzc1JlZyggY2xhc3NOYW1lICkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoXCIoXnxcXFxccyspXCIgKyBjbGFzc05hbWUgKyBcIihcXFxccyt8JClcIik7XHJcbiAgfVxyXG5cclxuLy8gY2xhc3NMaXN0IHN1cHBvcnQgZm9yIGNsYXNzIG1hbmFnZW1lbnRcclxuLy8gYWx0aG8gdG8gYmUgZmFpciwgdGhlIGFwaSBzdWNrcyBiZWNhdXNlIGl0IHdvbid0IGFjY2VwdCBtdWx0aXBsZSBjbGFzc2VzIGF0IG9uY2VcclxuICB2YXIgaGFzQ2xhc3MsIGFkZENsYXNzLCByZW1vdmVDbGFzcztcclxuXHJcbiAgaWYgKCAnY2xhc3NMaXN0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgKSB7XHJcbiAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICByZXR1cm4gZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoIGMgKTtcclxuICAgIH07XHJcbiAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoIGMgKTtcclxuICAgIH07XHJcbiAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoIGMgKTtcclxuICAgIH07XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgaGFzQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcclxuICAgICAgcmV0dXJuIGNsYXNzUmVnKCBjICkudGVzdCggZWxlbS5jbGFzc05hbWUgKTtcclxuICAgIH07XHJcbiAgICBhZGRDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICBpZiAoICFoYXNDbGFzcyggZWxlbSwgYyApICkge1xyXG4gICAgICAgIGVsZW0uY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWUgKyAnICcgKyBjO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbiggZWxlbSwgYyApIHtcclxuICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZS5yZXBsYWNlKCBjbGFzc1JlZyggYyApLCAnICcgKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0b2dnbGVDbGFzcyggZWxlbSwgYyApIHtcclxuICAgIHZhciBmbiA9IGhhc0NsYXNzKCBlbGVtLCBjICkgPyByZW1vdmVDbGFzcyA6IGFkZENsYXNzO1xyXG4gICAgZm4oIGVsZW0sIGMgKTtcclxuICB9XHJcblxyXG4gIHZhciBjbGFzc2llID0ge1xyXG4gICAgLy8gZnVsbCBuYW1lc1xyXG4gICAgaGFzQ2xhc3M6IGhhc0NsYXNzLFxyXG4gICAgYWRkQ2xhc3M6IGFkZENsYXNzLFxyXG4gICAgcmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxyXG4gICAgdG9nZ2xlQ2xhc3M6IHRvZ2dsZUNsYXNzLFxyXG4gICAgLy8gc2hvcnQgbmFtZXNcclxuICAgIGhhczogaGFzQ2xhc3MsXHJcbiAgICBhZGQ6IGFkZENsYXNzLFxyXG4gICAgcmVtb3ZlOiByZW1vdmVDbGFzcyxcclxuICAgIHRvZ2dsZTogdG9nZ2xlQ2xhc3NcclxuICB9O1xyXG5cclxuLy8gdHJhbnNwb3J0XHJcbiAgaWYgKCB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgKSB7XHJcbiAgICAvLyBBTURcclxuICAgIGRlZmluZSggY2xhc3NpZSApO1xyXG4gIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcclxuICAgIC8vIENvbW1vbkpTXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGNsYXNzaWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIGJyb3dzZXIgZ2xvYmFsXHJcbiAgICB3aW5kb3cuY2xhc3NpZSA9IGNsYXNzaWU7XHJcbiAgfVxyXG5cclxufSkoIHdpbmRvdyApOyIsImpRdWVyeShmdW5jdGlvbigkKSB7XG4gIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFXCIpIDwgMCkge1xuICAgICAgLy9JRTgg5LiN5pSv5oyBY29uc29sZVxuICAgICAgY29uc29sZS5sb2coXCJeX14g5oOz5Yqg5YWl56yU5oiI56eR5oqA5byA5Y+R5Zui6Zif77yf6K+35Y+R6YCB6YKu5Lu25YiwIGxpdXhpbmdAbWVpenUuY29tXCIpO1xuICB9XG5cbiAgaWYoJChcImltZy5sYXp5XCIpICYmICQoXCJpbWcubGF6eVwiKS5sZW5ndGggPiAwKVxuICAgICQoXCJpbWcubGF6eVwiKS5sYXp5bG9hZCh7ZWZmZWN0OiBcImZhZGVJblwifSk7XG5cbiAgJChkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHFyY29kZSA9ICQoXCIucXJjb2RlXCIpO1xuICAgICAgJChcIi5pY29uLXdlY2hhdFwiKS5ob3ZlcihmdW5jdGlvbigpe1xuICAgICAgICAgIHZhciBwb3MgPSAkKHRoaXMpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgcXJjb2RlLmNzcyhcImxlZnRcIiwgKCQod2luZG93KS53aWR0aCgpLXFyY29kZS53aWR0aCgpKS8yKTtcbiAgICAgICAgICBxcmNvZGUuY3NzKFwidG9wXCIsIHBvcy50b3AtMjcwKTtcbiAgICAgICAgICBxcmNvZGUuZmFkZUluKCkuc2hvdygpO1xuICAgICAgfSxmdW5jdGlvbigpe1xuICAgICAgICAgIHFyY29kZS5oaWRlKCk7XG4gICAgICB9KTtcbiAgfSk7XG59KTtcbiIsInZhciBNZW51ID0ge1xuICBzZXR0aW5nczoge1xuICAgIG1lbnVCdG46ICQoXCIuanMtbWVudUJ0blwiKSxcbiAgICBtZW51OiAkKFwiLmpzLW1lbnVcIiksXG4gICAgY2xvc2VCdG46ICQoXCIuanMtY2xvc2VCdG5cIiksXG4gICAgYmc6ICQoXCIuanMtQmdcIiksXG4gICAgY29udGFpbmVyOiAkKFwiLmpzLW1lbnVDb250YWluZXJcIiksXG4gICAgaXNPcGVuOiAhMSxcbiAgICBpc0FuaW1hdGluZzogITFcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYmluZFVJQWN0aW9ucygpXG4gIH0sXG4gIGJpbmRVSUFjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5tZW51QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTWVudS50b2dnbGUoKVxuICAgIH0pO1xuICAgIGUuYmcuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIE1lbnUuY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY2xvc2VCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LmNsb3NlKClcbiAgICB9KTtcbiAgICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBNZW51LmNsb3NlKClcbiAgICB9KVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5pc09wZW4gPyBNZW51LmNsb3NlKCkgOiBNZW51Lm9wZW4oKVxuICB9LFxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgZS5tZW51LmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICB9XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICBlLmlzT3BlbiA9ICEwO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgIGUubWVudS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgIHNldFRpbWVvdXQodCwgMTAwKVxuICAgIH1cbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICBlLm1lbnUuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgIH1cbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgIGUuaXNPcGVuID0gITE7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgZS5tZW51LnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXG4gICAgfVxuICB9XG59LCBTZWFyY2ggPSB7XG4gIHNldHRpbmdzOiB7XG4gICAgICB0ZXh0Qm94OiAkKFwiLnRleHRib3hcIiksXG4gICAgICBzZWFyY2hCdG46ICQoXCIuanMtc2VhcmNoQnRuXCIpLFxuICAgICAgc2VhcmNoOiAkKFwiLmpzLXNlYXJjaFwiKSxcbiAgICAgIGNsb3NlQnRuOiAkKFwiLmpzLWNsb3NlQnRuXCIpLFxuICAgICAgYmc6ICQoXCIuanMtQmdcIiksXG4gICAgICBjb250YWluZXI6ICQoXCIuanMtc2VhcmNoQ29udGFpbmVyXCIpLFxuICAgICAgaXNPcGVuOiAhMSxcbiAgICAgIGlzQW5pbWF0aW5nOiAhMVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmJpbmRVSUFjdGlvbnMoKVxuICB9LFxuICBiaW5kVUlBY3Rpb25zOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGUuc2VhcmNoQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLnRvZ2dsZSgpXG4gICAgfSk7XG4gICAgLy8g5aSE55CG5pCc57Si5qGG6Zi75q2i5YaS5rOhXG4gICAgZS50ZXh0Qm94LmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFNlYXJjaC5jbG9zZSgpXG4gICAgfSk7XG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PT0gMjcgJiYgU2VhcmNoLmNsb3NlKClcbiAgICB9KVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICAgIGUuaXNPcGVuID8gU2VhcmNoLmNsb3NlKCkgOiBTZWFyY2gub3BlbigpXG4gIH0sXG4gIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgZS5zZWFyY2guYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgICB9XG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgICBlLmlzT3BlbiA9ICEwO1xuICAgICAgICAgIGUuc2VhcmNoLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEwMClcbiAgICAgIH1cbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgZS5zZWFyY2guY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgICB9XG4gICAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgICBlLmlzT3BlbiA9ICExO1xuICAgICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgICBlLnNlYXJjaC5yZW1vdmVDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXG4gICAgICB9XG4gIH0sXG59O1xuXG52YXIgVGFnID0ge1xuICBzZXR0aW5nczoge1xuICAgIHRhZ0J0bjogJChcIi5qcy10YWdCdG5cIiksXG4gICAgdGFnOiAkKFwiLmpzLXRhZ3NcIiksXG4gICAgY2xvc2VCdG46ICQoXCIuanMtY2xvc2VCdG5cIiksXG4gICAgYmc6ICQoXCIuanMtQmdcIiksXG4gICAgY29udGFpbmVyOiAkKFwiLmpzLXRhZ0NvbnRhaW5lclwiKSxcbiAgICBpc09wZW46ICExLFxuICAgIGlzQW5pbWF0aW5nOiAhMVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5iaW5kVUlBY3Rpb25zKClcbiAgfSxcbiAgYmluZFVJQWN0aW9uczogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBlLnRhZ0J0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFRhZy50b2dnbGUoKVxuICAgIH0pO1xuICAgIGUuYmcuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBUYWcuY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY29udGFpbmVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgVGFnLmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgVGFnLmNsb3NlKClcbiAgICB9KTtcbiAgICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBUYWcuY2xvc2UoKVxuICAgIH0pXG4gIH0sXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBlLmlzT3BlbiA/IFRhZy5jbG9zZSgpIDogVGFnLm9wZW4oKVxuICB9LFxuICBvcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgZS50YWcuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgIH1cbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgIGUuaXNPcGVuID0gITA7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgZS50YWcuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHQsIDEwMClcbiAgICB9XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgZS50YWcuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgIH1cbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgIGUuaXNPcGVuID0gITE7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgZS50YWcucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgIHNldFRpbWVvdXQodCwgMTIwMClcbiAgICB9XG4gIH1cbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgTWVudS5pbml0KCk7XG4gIFNlYXJjaC5pbml0KCk7XG4gIFRhZy5pbml0KCk7XG59KTtcbiIsInZhciBzY3JvbGx0b3RvcD17XHJcblxyXG4gICAgLy9zdGFydGxpbmU6IEludGVnZXIuIE51bWJlciBvZiBwaXhlbHMgZnJvbSB0b3Agb2YgZG9jIHNjcm9sbGJhciBpcyBzY3JvbGxlZCBiZWZvcmUgc2hvd2luZyBjb250cm9sXHJcblxyXG4gICAgLy9zY3JvbGx0bzogS2V5d29yZCAoSW50ZWdlciwgb3IgXCJTY3JvbGxfdG9fRWxlbWVudF9JRFwiKS4gSG93IGZhciB0byBzY3JvbGwgZG9jdW1lbnQgdXAgd2hlbiBjb250cm9sIGlzIGNsaWNrZWQgb24gKDA9dG9wKS5cclxuXHJcbiAgICBzZXR0aW5nOiB7c3RhcnRsaW5lOjEwMCwgc2Nyb2xsdG86IDAsIHNjcm9sbGR1cmF0aW9uOjEwMDAsIGZhZGVkdXJhdGlvbjpbNTAwLCAxMDBdfSxcclxuXHJcbiAgICBjb250cm9sSFRNTDogXCI8ZGl2IGlkPSd0b1RvcCcgY2xhc3M9J2ljb24tdXAnPjwvZGl2PlwiLCAvL0hUTUwgZm9yIGNvbnRyb2wsIHdoaWNoIGlzIGF1dG8gd3JhcHBlZCBpbiBESVYgdy8gSUQ9XCJ0b3Bjb250cm9sXCJcclxuXHJcbiAgICBjb250cm9sYXR0cnM6IHtvZmZzZXR4OjUsIG9mZnNldHk6NX0sIC8vb2Zmc2V0IG9mIGNvbnRyb2wgcmVsYXRpdmUgdG8gcmlnaHQvIGJvdHRvbSBvZiB3aW5kb3cgY29ybmVyXHJcblxyXG4gICAgYW5jaG9ya2V5d29yZDogJyN0b3AnLCAvL0VudGVyIGhyZWYgdmFsdWUgb2YgSFRNTCBhbmNob3JzIG9uIHRoZSBwYWdlIHRoYXQgc2hvdWxkIGFsc28gYWN0IGFzIFwiU2Nyb2xsIFVwXCIgbGlua3NcclxuXHJcbiBzdGF0ZToge2lzdmlzaWJsZTpmYWxzZSwgc2hvdWxkdmlzaWJsZTpmYWxzZX0sXHJcblxyXG5cclxuICAgIHNjcm9sbHVwOmZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jc3NmaXhlZHN1cHBvcnQpIC8vaWYgY29udHJvbCBpcyBwb3NpdGlvbmVkIHVzaW5nIEphdmFTY3JpcHRcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRyb2wuY3NzKHtvcGFjaXR5OjB9KSAvL2hpZGUgY29udHJvbCBpbW1lZGlhdGVseSBhZnRlciBjbGlja2luZyBpdFxyXG5cclxuICAgICAgICB2YXIgZGVzdD1pc05hTih0aGlzLnNldHRpbmcuc2Nyb2xsdG8pPyB0aGlzLnNldHRpbmcuc2Nyb2xsdG8gOiBwYXJzZUludCh0aGlzLnNldHRpbmcuc2Nyb2xsdG8pXHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgZGVzdD09XCJzdHJpbmdcIiAmJiBqUXVlcnkoJyMnK2Rlc3QpLmxlbmd0aD09MSkgLy9jaGVjayBlbGVtZW50IHNldCBieSBzdHJpbmcgZXhpc3RzXHJcblxyXG4gICAgICAgICAgICBkZXN0PWpRdWVyeSgnIycrZGVzdCkub2Zmc2V0KCkudG9wXHJcblxyXG4gICAgICAgIGVsc2VcclxuXHJcbiAgICAgICAgICAgIGRlc3Q9MFxyXG5cclxuICAgICAgICB0aGlzLiRib2R5LmFuaW1hdGUoe3Njcm9sbFRvcDogZGVzdH0sIHRoaXMuc2V0dGluZy5zY3JvbGxkdXJhdGlvbik7XHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAga2VlcGZpeGVkOmZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIHZhciAkd2luZG93PWpRdWVyeSh3aW5kb3cpXHJcblxyXG4gICAgICAgIHZhciBjb250cm9seD0kd2luZG93LnNjcm9sbExlZnQoKSArICR3aW5kb3cud2lkdGgoKSAtIHRoaXMuJGNvbnRyb2wud2lkdGgoKSAtIHRoaXMuY29udHJvbGF0dHJzLm9mZnNldHhcclxuXHJcbiAgICAgICAgdmFyIGNvbnRyb2x5PSR3aW5kb3cuc2Nyb2xsVG9wKCkgKyAkd2luZG93LmhlaWdodCgpIC0gdGhpcy4kY29udHJvbC5oZWlnaHQoKSAtIHRoaXMuY29udHJvbGF0dHJzLm9mZnNldHlcclxuXHJcbiAgICAgICAgdGhpcy4kY29udHJvbC5jc3Moe2xlZnQ6Y29udHJvbHgrJ3B4JywgdG9wOmNvbnRyb2x5KydweCd9KVxyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIHRvZ2dsZWNvbnRyb2w6ZnVuY3Rpb24oKXtcclxuXHJcblxyXG5cclxuICAgICAgICB2YXIgc2Nyb2xsdG9wPWpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpXHJcblxyXG4gICAgICAgIGlmICghdGhpcy5jc3NmaXhlZHN1cHBvcnQpXHJcblxyXG4gICAgICAgICAgICB0aGlzLmtlZXBmaXhlZCgpXHJcblxyXG4gICAgICAgIHRoaXMuc3RhdGUuc2hvdWxkdmlzaWJsZT0oc2Nyb2xsdG9wPj10aGlzLnNldHRpbmcuc3RhcnRsaW5lKT8gdHJ1ZSA6IGZhbHNlXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNob3VsZHZpc2libGUgJiYgIXRoaXMuc3RhdGUuaXN2aXNpYmxlKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuJGNvbnRyb2wuc3RvcCgpLmFuaW1hdGUoe29wYWNpdHk6MX0sIHRoaXMuc2V0dGluZy5mYWRlZHVyYXRpb25bMF0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmlzdmlzaWJsZT10cnVlXHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5zaG91bGR2aXNpYmxlPT1mYWxzZSAmJiB0aGlzLnN0YXRlLmlzdmlzaWJsZSl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRjb250cm9sLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OjB9LCB0aGlzLnNldHRpbmcuZmFkZWR1cmF0aW9uWzFdKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc3Zpc2libGU9ZmFsc2VcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBpbml0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigkKXtcclxuICAgICAgICAgICAgdmFyIG1haW5vYmo9c2Nyb2xsdG90b3BcclxuICAgICAgICAgICAgdmFyIGllYnJ3cz1kb2N1bWVudC5hbGxcclxuICAgICAgICAgICAgbWFpbm9iai5jc3NmaXhlZHN1cHBvcnQ9IWllYnJ3cyB8fCBpZWJyd3MgJiYgZG9jdW1lbnQuY29tcGF0TW9kZT09XCJDU1MxQ29tcGF0XCIgJiYgd2luZG93LlhNTEh0dHBSZXF1ZXN0IC8vbm90IElFIG9yIElFNysgYnJvd3NlcnMgaW4gc3RhbmRhcmRzIG1vZGVcclxuICAgICAgICAgICAgbWFpbm9iai4kYm9keT0od2luZG93Lm9wZXJhKT8gKGRvY3VtZW50LmNvbXBhdE1vZGU9PVwiQ1NTMUNvbXBhdFwiPyAkKCdodG1sJykgOiAkKCdib2R5JykpIDogJCgnaHRtbCxib2R5JylcclxuICAgICAgICAgICAgbWFpbm9iai4kY29udHJvbD0kKCc8ZGl2IGlkPVwidG9wY29udHJvbFwiPicrbWFpbm9iai5jb250cm9sSFRNTCsnPC9kaXY+JylcclxuICAgICAgICAgICAgICAgIC5jc3Moe3Bvc2l0aW9uOm1haW5vYmouY3NzZml4ZWRzdXBwb3J0PyAnZml4ZWQnIDogJ2Fic29sdXRlJywgYm90dG9tOm1haW5vYmouY29udHJvbGF0dHJzLm9mZnNldHksIHJpZ2h0Om1haW5vYmouY29udHJvbGF0dHJzLm9mZnNldHgsIG9wYWNpdHk6MCxjdXJzb3I6J3BvaW50ZXInfSlcclxuICAgICAgICAgICAgICAgIC5hdHRyKHt0aXRsZTonU2Nyb2xsIHRvIFRvcCd9KVxyXG4gICAgICAgICAgICAgICAgLmNsaWNrKGZ1bmN0aW9uKCl7bWFpbm9iai5zY3JvbGx1cCgpOyByZXR1cm4gZmFsc2V9KVxyXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCdib2R5JylcclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmFsbCAmJiAhd2luZG93LlhNTEh0dHBSZXF1ZXN0ICYmIG1haW5vYmouJGNvbnRyb2wudGV4dCgpIT0nJykgLy9sb29zZSBjaGVjayBmb3IgSUU2IGFuZCBiZWxvdywgcGx1cyB3aGV0aGVyIGNvbnRyb2wgY29udGFpbnMgYW55IHRleHRcclxuICAgICAgICAgICAgICAgIG1haW5vYmouJGNvbnRyb2wuY3NzKHt3aWR0aDptYWlub2JqLiRjb250cm9sLndpZHRoKCl9KSAvL0lFNi0gc2VlbXMgdG8gcmVxdWlyZSBhbiBleHBsaWNpdCB3aWR0aCBvbiBhIERJViBjb250YWluaW5nIHRleHRcclxuICAgICAgICAgICAgbWFpbm9iai50b2dnbGVjb250cm9sKClcclxuXHJcbiQoJ2FbaHJlZj1cIicgKyBtYWlub2JqLmFuY2hvcmtleXdvcmQgKydcIl0nKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbWFpbm9iai5zY3JvbGx1cCgpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ3Njcm9sbCByZXNpemUnLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIG1haW5vYmoudG9nZ2xlY29udHJvbCgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufVxyXG5zY3JvbGx0b3RvcC5pbml0KCk7XHJcbiIsIlxuKGZ1bmN0aW9uKCkge1xuXG4gIC8vIGRldGVjdCBpZiBJRSA6IGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTY2NTc5NDZcbiAgdmFyIGllID0gKGZ1bmN0aW9uKCl7XG4gICAgdmFyIHVuZGVmLHJ2ID0gLTE7IC8vIFJldHVybiB2YWx1ZSBhc3N1bWVzIGZhaWx1cmUuXG4gICAgdmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XG4gICAgdmFyIG1zaWUgPSB1YS5pbmRleE9mKCdNU0lFICcpO1xuICAgIHZhciB0cmlkZW50ID0gdWEuaW5kZXhPZignVHJpZGVudC8nKTtcblxuICAgIGlmIChtc2llID4gMCkge1xuICAgICAgLy8gSUUgMTAgb3Igb2xkZXIgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyXG4gICAgICBydiA9IHBhcnNlSW50KHVhLnN1YnN0cmluZyhtc2llICsgNSwgdWEuaW5kZXhPZignLicsIG1zaWUpKSwgMTApO1xuICAgIH0gZWxzZSBpZiAodHJpZGVudCA+IDApIHtcbiAgICAgIC8vIElFIDExIChvciBuZXdlcikgPT4gcmV0dXJuIHZlcnNpb24gbnVtYmVyXG4gICAgICB2YXIgcnZOdW0gPSB1YS5pbmRleE9mKCdydjonKTtcbiAgICAgIHJ2ID0gcGFyc2VJbnQodWEuc3Vic3RyaW5nKHJ2TnVtICsgMywgdWEuaW5kZXhPZignLicsIHJ2TnVtKSksIDEwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKChydiA+IC0xKSA/IHJ2IDogdW5kZWYpO1xuICB9KCkpO1xuXG5cbiAgLy8gZGlzYWJsZS9lbmFibGUgc2Nyb2xsIChtb3VzZXdoZWVsIGFuZCBrZXlzKSBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzQ3NzAxNzlcbiAgLy8gbGVmdDogMzcsIHVwOiAzOCwgcmlnaHQ6IDM5LCBkb3duOiA0MCxcbiAgLy8gc3BhY2ViYXI6IDMyLCBwYWdldXA6IDMzLCBwYWdlZG93bjogMzQsIGVuZDogMzUsIGhvbWU6IDM2XG4gIHZhciBrZXlzID0gWzMyLCAzNywgMzgsIDM5LCA0MF0sIHdoZWVsSXRlciA9IDA7XG5cbiAgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xuICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcbiAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdClcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBrZXlkb3duKGUpIHtcbiAgICBmb3IgKHZhciBpID0ga2V5cy5sZW5ndGg7IGktLTspIHtcbiAgICAgIGlmIChlLmtleUNvZGUgPT09IGtleXNbaV0pIHtcbiAgICAgICAgcHJldmVudERlZmF1bHQoZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b3VjaG1vdmUoZSkge1xuICAgIHByZXZlbnREZWZhdWx0KGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gd2hlZWwoZSkge1xuICAgIC8vIGZvciBJRVxuICAgIC8vaWYoIGllICkge1xuICAgIC8vcHJldmVudERlZmF1bHQoZSk7XG4gICAgLy99XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlX3Njcm9sbCgpIHtcbiAgICB3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gd2hlZWw7XG4gICAgZG9jdW1lbnQub25rZXlkb3duID0ga2V5ZG93bjtcbiAgICBkb2N1bWVudC5ib2R5Lm9udG91Y2htb3ZlID0gdG91Y2htb3ZlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5hYmxlX3Njcm9sbCgpIHtcbiAgICB3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25rZXlkb3duID0gZG9jdW1lbnQuYm9keS5vbnRvdWNobW92ZSA9IG51bGw7XG4gIH1cblxuICB2YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG4gICAgc2Nyb2xsVmFsLFxuICAgIGlzUmV2ZWFsZWQsXG4gICAgbm9zY3JvbGwsXG4gICAgaXNBbmltYXRpbmcsXG4gICAgdG9wU2Nyb2xsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICd0b3BTY3JvbGwnICk7XG5cbiAgZnVuY3Rpb24gc2Nyb2xsWSgpIHtcbiAgICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsUGFnZSgpIHtcbiAgICBzY3JvbGxWYWwgPSBzY3JvbGxZKCk7XG5cbiAgICBpZiggbm9zY3JvbGwgJiYgIWllICkge1xuICAgICAgaWYoIHNjcm9sbFZhbCA8IDAgKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBrZWVwIGl0IHRoYXQgd2F5XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oIDAsIDAgKTtcbiAgICB9XG5cbiAgICBpZiggaXNBbmltYXRpbmcgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYoIHNjcm9sbFZhbCA8PSAwICYmIGlzUmV2ZWFsZWQgKSB7XG4gICAgICB0b2dnbGUoMCk7XG4gICAgfVxuICAgIGVsc2UgaWYoIHNjcm9sbFZhbCA+IDAgJiYgIWlzUmV2ZWFsZWQgKXtcbiAgICAgIHRvZ2dsZSgxKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB0b2dnbGUoIHJldmVhbCApIHtcbiAgICBpc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICBpZiggcmV2ZWFsICkge1xuICAgICAgY2xhc3NpZS5hZGQoIHRvcFNjcm9sbCwgJ21vZGlmeScgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9zY3JvbGwgPSB0cnVlO1xuICAgICAgZGlzYWJsZV9zY3JvbGwoKTtcbiAgICAgIGNsYXNzaWUucmVtb3ZlKCB0b3BTY3JvbGwsICdtb2RpZnknICk7XG4gICAgfVxuXG4gICAgLy8gc2ltdWxhdGluZyB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uOlxuICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuICAgICAgaXNSZXZlYWxlZCA9ICFpc1JldmVhbGVkO1xuICAgICAgaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgIGlmKCByZXZlYWwgKSB7XG4gICAgICAgIG5vc2Nyb2xsID0gZmFsc2U7XG4gICAgICAgIGVuYWJsZV9zY3JvbGwoKTtcbiAgICAgIH1cbiAgICB9LCA2MDAgKTtcbiAgfVxuXG4gIC8vIHJlZnJlc2hpbmcgdGhlIHBhZ2UuLi5cbiAgdmFyIHBhZ2VTY3JvbGwgPSBzY3JvbGxZKCk7XG4gIG5vc2Nyb2xsID0gcGFnZVNjcm9sbCA9PT0gMDtcblxuICAvLyBkaXNhYmxlX3Njcm9sbCgpO1xuXG4gIGlmKCBwYWdlU2Nyb2xsICkge1xuICAgIGlzUmV2ZWFsZWQgPSB0cnVlO1xuICAgIGNsYXNzaWUuYWRkKCB0b3BTY3JvbGwsICdtb2RpZnknICk7XG4gIH1cblxuICBpZihuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJNU0lFIDkuMFwiKSA+IDApIHtcbiAgICBpZihkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gNzY4ICkge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdzY3JvbGwnLCBzY3JvbGxQYWdlICk7XG4gICAgfVxuICB9XG4gIFxufSkoKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==