var animatedHeader=function(){function t(){window.addEventListener("scroll",function(){s||(s=!0,setTimeout(e,250))},!1)}function e(){var t=n();t>=c?classie.add(o,"navbar-pinned"):classie.remove(o,"navbar-pinned"),s=!1}function n(){return window.pageYOffset||i.scrollTop}var i=document.documentElement,o=document.querySelector(".navbar"),s=!1,c=312;if(document.querySelector(".home-template")&&document.body.clientWidth>768&&t(),document.querySelector(".category-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>768&&t()}if(document.querySelector(".author-template")){if(document.querySelector(".archive-template"))return!1;document.body.clientWidth>768&&t()}}();!function(t){"use strict";function e(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")}function n(t,e){var n=i(t,e)?s:o;n(t,e)}var i,o,s;"classList"in document.documentElement?(i=function(t,e){return t.classList.contains(e)},o=function(t,e){t.classList.add(e)},s=function(t,e){t.classList.remove(e)}):(i=function(t,n){return e(n).test(t.className)},o=function(t,e){i(t,e)||(t.className=t.className+" "+e)},s=function(t,n){t.className=t.className.replace(e(n)," ")});var c={hasClass:i,addClass:o,removeClass:s,toggleClass:n,has:i,add:o,remove:s,toggle:n};"function"==typeof define&&define.amd?define(c):"object"==typeof exports?module.exports=c:t.classie=c}(window),jQuery(function(t){navigator.userAgent.indexOf("MSIE")<0&&console.log("^_^ 想加入笔戈科技开发团队？请发送邮件到 liuxing@meizu.com"),t("img.lazy")&&t("img.lazy").length>0&&t("img.lazy").lazyload({effect:"fadeIn",threshold:300}),t(document).ready(function(){var e=t(".qrcode");t(".icon-wechat").hover(function(){var n=t(this).position();e.css("left",(t(window).width()-e.width())/2),e.css("top",n.top-270),e.fadeIn().show()},function(){e.hide()})})}),!function(t,e,n,i){var o=t(e);t.fn.lazyload=function(s){function c(){var e=0;a.each(function(){var n=t(this);if(!l.skip_invisible||n.is(":visible"))if(t.abovethetop(this,l)||t.leftofbegin(this,l));else if(t.belowthefold(this,l)||t.rightoffold(this,l)){if(++e>l.failure_limit)return!1}else n.trigger("appear"),e=0})}var r,a=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(l,s)),r=l.container===i||l.container===e?o:t(l.container),0===l.event.indexOf("scroll")&&r.bind(l.event,function(){return c()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,(n.attr("src")===i||n.attr("src")===!1)&&n.is("img")&&n.attr("src",l.placeholder),n.one("appear",function(){if(!this.loaded){if(l.appear){var i=a.length;l.appear.call(e,i,l)}t("<img />").bind("load",function(){var i=n.attr("data-"+l.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[l.effect](l.effect_speed),e.loaded=!0;var o=t.grep(a,function(t){return!t.loaded});if(a=t(o),l.load){var s=a.length;l.load.call(e,s,l)}}).attr("src",n.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&n.bind(l.event,function(){e.loaded||n.trigger("appear")})}),o.bind("resize",function(){c()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&a.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){c()}),this},t.belowthefold=function(n,s){var c;return c=s.container===i||s.container===e?(e.innerHeight?e.innerHeight:o.height())+o.scrollTop():t(s.container).offset().top+t(s.container).height(),c<=t(n).offset().top-s.threshold},t.rightoffold=function(n,s){var c;return c=s.container===i||s.container===e?o.width()+o.scrollLeft():t(s.container).offset().left+t(s.container).width(),c<=t(n).offset().left-s.threshold},t.abovethetop=function(n,s){var c;return c=s.container===i||s.container===e?o.scrollTop():t(s.container).offset().top,c>=t(n).offset().top+s.threshold+t(n).height()},t.leftofbegin=function(n,s){var c;return c=s.container===i||s.container===e?o.scrollLeft():t(s.container).offset().left,c>=t(n).offset().left+s.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document);var Menu={settings:{menuBtn:$(".js-menuBtn"),menu:$(".js-menu"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-menuContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.menuBtn.click(function(){Menu.toggle()}),t.bg.click(function(){Menu.close()}),t.container.click(function(){Menu.close()}),t.closeBtn.click(function(){Menu.close()}),$(window).keydown(function(t){27===t.which&&Menu.close()})},toggle:function(){var t=this.settings;t.isOpen?Menu.close():Menu.open()},open:function(){function t(){e.menu.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.menu.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.menu.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.menu.removeClass("is-active"),setTimeout(t,1200))}},Search={settings:{textBox:$(".textbox"),searchBtn:$(".js-searchBtn"),search:$(".js-search"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-searchContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.searchBtn.click(function(){Search.toggle()}),t.textBox.click(function(){return!1}),t.bg.click(function(){Search.close()}),t.container.click(function(){Search.close()}),t.closeBtn.click(function(){Search.close()}),$(window).keydown(function(t){27===t.which&&Search.close()})},toggle:function(){var t=this.settings;t.isOpen?Search.close():Search.open()},open:function(){function t(){e.search.addClass("is-active"),e.textBox.focus(),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.search.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.search.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.search.removeClass("is-active"),setTimeout(t,1200))}},Tag={settings:{tagBtn:$(".js-tagBtn"),tag:$(".js-tags"),closeBtn:$(".js-closeBtn"),bg:$(".js-Bg"),container:$(".js-tagContainer"),isOpen:!1,isAnimating:!1},init:function(){this.bindUIActions()},bindUIActions:function(){var t=this.settings;t.tagBtn.click(function(){Tag.toggle()}),t.bg.click(function(){Tag.close()}),t.container.click(function(){Tag.close()}),t.closeBtn.click(function(){Tag.close()}),$(window).keydown(function(t){27===t.which&&Tag.close()})},toggle:function(){var t=this.settings;t.isOpen?Tag.close():Tag.open()},open:function(){function t(){e.tag.addClass("is-active"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!0,e.isAnimating=!0,e.tag.css("display","block"),setTimeout(t,100))},close:function(){function t(){e.tag.css("display","none"),e.isAnimating=!1}var e=this.settings;e.isAnimating===!1&&(e.isOpen=!1,e.isAnimating=!0,e.tag.removeClass("is-active"),setTimeout(t,1200))}};$(document).ready(function(){Menu.init(),Search.init(),Tag.init()});var scrolltotop={setting:{startline:100,scrollto:0,scrollduration:1e3,fadeduration:[500,100]},controlHTML:"<div id='toTop' class='icon-up'></div>",controlattrs:{offsetx:5,offsety:5},anchorkeyword:"#top",state:{isvisible:!1,shouldvisible:!1},scrollup:function(){this.cssfixedsupport||this.$control.css({opacity:0});var t=isNaN(this.setting.scrollto)?this.setting.scrollto:parseInt(this.setting.scrollto);t="string"==typeof t&&1==jQuery("#"+t).length?jQuery("#"+t).offset().top:0,this.$body.animate({scrollTop:t},this.setting.scrollduration)},keepfixed:function(){var t=jQuery(window),e=t.scrollLeft()+t.width()-this.$control.width()-this.controlattrs.offsetx,n=t.scrollTop()+t.height()-this.$control.height()-this.controlattrs.offsety;this.$control.css({left:e+"px",top:n+"px"})},togglecontrol:function(){var t=jQuery(window).scrollTop();this.cssfixedsupport||this.keepfixed(),this.state.shouldvisible=t>=this.setting.startline?!0:!1,this.state.shouldvisible&&!this.state.isvisible?(this.$control.stop().animate({opacity:1},this.setting.fadeduration[0]),this.state.isvisible=!0):0==this.state.shouldvisible&&this.state.isvisible&&(this.$control.stop().animate({opacity:0},this.setting.fadeduration[1]),this.state.isvisible=!1)},init:function(){jQuery(document).ready(function(t){var e=scrolltotop,n=document.all;e.cssfixedsupport=!n||n&&"CSS1Compat"==document.compatMode&&window.XMLHttpRequest,e.$body=window.opera?"CSS1Compat"==document.compatMode?t("html"):t("body"):t("html,body"),e.$control=t('<div id="topcontrol">'+e.controlHTML+"</div>").css({position:e.cssfixedsupport?"fixed":"absolute",bottom:e.controlattrs.offsety,right:e.controlattrs.offsetx,opacity:0,cursor:"pointer"}).attr({title:"Scroll to Top"}).click(function(){return e.scrollup(),!1}).appendTo("body"),document.all&&!window.XMLHttpRequest&&""!=e.$control.text()&&e.$control.css({width:e.$control.width()}),e.togglecontrol(),t('a[href="'+e.anchorkeyword+'"]').click(function(){return e.scrollup(),!1}),t(window).bind("scroll resize",function(){e.togglecontrol()})})}};scrolltotop.init(),function(){function t(t){t=t||window.event,t.preventDefault&&t.preventDefault(),t.returnValue=!1}function e(e){for(var n=h.length;n--;)if(e.keyCode===h[n])return t(e),void 0}function n(e){t(e)}function i(){}function o(){window.onmousewheel=document.onmousewheel=i,document.onkeydown=e,document.body.ontouchmove=n}function s(){window.onmousewheel=document.onmousewheel=document.onkeydown=document.body.ontouchmove=null}function c(){return window.pageYOffset||g.scrollTop}function r(){if(l=c(),f){if(0>l)return!1;window.scrollTo(0,0)}return d?!1:(0>=l&&u?a(0):l>0&&!u&&a(1),void 0)}function a(t){d=!0,t?p.addClass("modify"):(f=!0,o(),p.removeClass("modify")),u=!u,d=!1,t&&(f=!1,s()),setTimeout(function(){u=!u,d=!1,t&&(f=!1,s())},600)}var l,u,f,d,h=[32,37,38,39,40],g=window.document.documentElement,p=$("#post-template"),m=c();f=0===m,m&&(u=!0,p.addClass("modify")),document.body.clientWidth>=768&&$(window).scroll(r)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGVkSGVhZGVyLmpzIiwiY2xhc3NpZS5qcyIsImluZGV4LmpzIiwianF1ZXJ5Lmxhenlsb2FkLm1pbi5qcyIsIm5hdmJhci5qcyIsInJldHVyblRvcC5qcyIsInRvcFNjcm9sbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFVQSxHQUFBLGdCQUFBLFdBT0EsUUFBQSxLQUNBLE9BQUEsaUJBQUEsU0FBQSxXQUNBLElBQ0EsR0FBQSxFQUNBLFdBQUEsRUFBQSxRQUVBLEdBR0EsUUFBQSxLQUNBLEdBQUEsR0FBQSxHQUNBLElBQUEsRUFDQSxRQUFBLElBQUEsRUFBQSxpQkFHQSxRQUFBLE9BQUEsRUFBQSxpQkFHQSxHQUFBLEVBR0EsUUFBQSxLQUNBLE1BQUEsUUFBQSxhQUFBLEVBQUEsVUEzQkEsR0FBQSxHQUFBLFNBQUEsZ0JBQ0EsRUFBQSxTQUFBLGNBQUEsV0FDQSxHQUFBLEVBQ0EsRUFBQSxHQWlDQSxJQU5BLFNBQUEsY0FBQSxtQkFDQSxTQUFBLEtBQUEsWUFBQSxLQUNBLElBSUEsU0FBQSxjQUFBLHNCQUFBLENBQ0EsR0FBQSxTQUFBLGNBQUEscUJBQ0EsT0FBQSxDQUVBLFVBQUEsS0FBQSxZQUFBLEtBQ0EsSUFLQSxHQUFBLFNBQUEsY0FBQSxvQkFBQSxDQUNBLEdBQUEsU0FBQSxjQUFBLHFCQUNBLE9BQUEsQ0FFQSxVQUFBLEtBQUEsWUFBQSxLQUNBLFNDaERBLFNBQUEsR0FFQSxZQUlBLFNBQUEsR0FBQSxHQUNBLE1BQUEsSUFBQSxRQUFBLFdBQUEsRUFBQSxZQWdDQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsR0FBQSxFQUFBLEVBQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxFQUFBLEdBN0JBLEdBQUEsR0FBQSxFQUFBLENBRUEsY0FBQSxVQUFBLGlCQUNBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLFVBQUEsU0FBQSxJQUVBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLElBQUEsSUFFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxPQUFBLE1BSUEsRUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsWUFFQSxFQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsRUFBQSxLQUNBLEVBQUEsVUFBQSxFQUFBLFVBQUEsSUFBQSxJQUdBLEVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxVQUFBLEVBQUEsVUFBQSxRQUFBLEVBQUEsR0FBQSxNQVNBLElBQUEsSUFFQSxTQUFBLEVBQ0EsU0FBQSxFQUNBLFlBQUEsRUFDQSxZQUFBLEVBRUEsSUFBQSxFQUNBLElBQUEsRUFDQSxPQUFBLEVBQ0EsT0FBQSxFQUlBLG1CQUFBLFNBQUEsT0FBQSxJQUVBLE9BQUEsR0FDQSxnQkFBQSxTQUVBLE9BQUEsUUFBQSxFQUdBLEVBQUEsUUFBQSxHQUdBLFFDcEZBLE9BQUEsU0FBQSxHQUNBLFVBQUEsVUFBQSxRQUFBLFFBQUEsR0FFQSxRQUFBLElBQUEsNENBR0EsRUFBQSxhQUFBLEVBQUEsWUFBQSxPQUFBLEdBQ0EsRUFBQSxZQUFBLFVBQ0EsT0FBQSxTQUNBLFVBQUEsTUFHQSxFQUFBLFVBQUEsTUFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsR0FBQSxnQkFBQSxNQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxVQUNBLEdBQUEsSUFBQSxRQUFBLEVBQUEsUUFBQSxRQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsSUFBQSxNQUFBLEVBQUEsSUFBQSxLQUNBLEVBQUEsU0FBQSxRQUNBLFdBQ0EsRUFBQSxjQ25CQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLEdBQUEsU0FBQSxTQUFBLEdBQUEsUUFBQSxLQUFBLEdBQUEsR0FBQSxDQUFBLEdBQUEsS0FBQSxXQUFBLEdBQUEsR0FBQSxFQUFBLEtBQUEsS0FBQSxFQUFBLGdCQUFBLEVBQUEsR0FBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEtBQUEsSUFBQSxFQUFBLFlBQUEsS0FBQSxRQUFBLElBQUEsRUFBQSxhQUFBLEtBQUEsSUFBQSxFQUFBLFlBQUEsS0FBQSxJQUFBLEtBQUEsRUFBQSxFQUFBLGNBQUEsT0FBQSxNQUFBLEdBQUEsUUFBQSxVQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUEsRUFBQSxLQUFBLEdBQUEsVUFBQSxFQUFBLGNBQUEsRUFBQSxNQUFBLFNBQUEsT0FBQSxPQUFBLFVBQUEsRUFBQSxlQUFBLFdBQUEsZ0JBQUEsRUFBQSxPQUFBLEtBQUEsS0FBQSxLQUFBLFlBQUEseUxBQUEsT0FBQSxLQUFBLElBQUEsRUFBQSxlQUFBLEVBQUEsY0FBQSxFQUFBLG1CQUFBLEdBQUEsY0FBQSxJQUFBLEVBQUEsY0FBQSxFQUFBLGFBQUEsRUFBQSxrQkFBQSxHQUFBLGFBQUEsRUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLFdBQUEsSUFBQSxFQUFBLE1BQUEsUUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsV0FBQSxNQUFBLE9BQUEsS0FBQSxLQUFBLFdBQUEsR0FBQSxHQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxRQUFBLEdBQUEsRUFBQSxLQUFBLFNBQUEsR0FBQSxFQUFBLEtBQUEsVUFBQSxJQUFBLEVBQUEsR0FBQSxRQUFBLEVBQUEsS0FBQSxNQUFBLEVBQUEsYUFBQSxFQUFBLElBQUEsU0FBQSxXQUFBLElBQUEsS0FBQSxPQUFBLENBQUEsR0FBQSxFQUFBLE9BQUEsQ0FBQSxHQUFBLEdBQUEsRUFBQSxNQUFBLEdBQUEsT0FBQSxLQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsV0FBQSxLQUFBLE9BQUEsV0FBQSxHQUFBLEdBQUEsRUFBQSxLQUFBLFFBQUEsRUFBQSxlQUFBLEdBQUEsT0FBQSxFQUFBLEdBQUEsT0FBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLEVBQUEsSUFBQSxtQkFBQSxRQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsUUFBQSxFQUFBLGNBQUEsRUFBQSxRQUFBLENBQUEsSUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsUUFBQSxJQUFBLEVBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLE1BQUEsR0FBQSxLQUFBLEtBQUEsRUFBQSxFQUFBLE1BQUEsS0FBQSxNQUFBLEVBQUEsS0FBQSxRQUFBLEVBQUEsb0JBQUEsSUFBQSxFQUFBLE1BQUEsUUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsV0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLGNBQUEsRUFBQSxLQUFBLFNBQUEsV0FBQSxNQUFBLCtCQUFBLEtBQUEsVUFBQSxhQUFBLEVBQUEsS0FBQSxXQUFBLFNBQUEsR0FBQSxFQUFBLGVBQUEsRUFBQSxjQUFBLFdBQUEsRUFBQSxLQUFBLFdBQUEsRUFBQSxNQUFBLFFBQUEsY0FBQSxFQUFBLEdBQUEsTUFBQSxXQUFBLE1BQUEsTUFBQSxFQUFBLGFBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxZQUFBLEVBQUEsVUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLFdBQUEsU0FBQSxJQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsV0FBQSxFQUFBLFlBQUEsU0FBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLE9BQUEsR0FBQSxFQUFBLFlBQUEsR0FBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsS0FBQSxFQUFBLEVBQUEsV0FBQSxRQUFBLEdBQUEsRUFBQSxHQUFBLFNBQUEsS0FBQSxFQUFBLFdBQUEsRUFBQSxZQUFBLFNBQUEsRUFBQSxHQUFBLEdBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQSxZQUFBLEdBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxZQUFBLEVBQUEsRUFBQSxXQUFBLFNBQUEsSUFBQSxHQUFBLEVBQUEsR0FBQSxTQUFBLElBQUEsRUFBQSxVQUFBLEVBQUEsR0FBQSxVQUFBLEVBQUEsWUFBQSxTQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsWUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEVBQUEsYUFBQSxFQUFBLEVBQUEsV0FBQSxTQUFBLEtBQUEsR0FBQSxFQUFBLEdBQUEsU0FBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLEdBQUEsU0FBQSxFQUFBLFdBQUEsU0FBQSxFQUFBLEdBQUEsUUFBQSxFQUFBLFlBQUEsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLElBQUEsRUFBQSxhQUFBLEVBQUEsSUFBQSxFQUFBLFlBQUEsRUFBQSxLQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsTUFBQSxpQkFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLGFBQUEsR0FBQSxVQUFBLEtBQUEsZ0JBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxhQUFBLEdBQUEsVUFBQSxLQUFBLGtCQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxHQUFBLFVBQUEsS0FBQSxpQkFBQSxTQUFBLEdBQUEsT0FBQSxFQUFBLFlBQUEsR0FBQSxVQUFBLEtBQUEsY0FBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFdBQUEsR0FBQSxVQUFBLEtBQUEsaUJBQUEsU0FBQSxHQUFBLE9BQUEsRUFBQSxhQUFBLEdBQUEsVUFBQSxLQUFBLGdCQUFBLFNBQUEsR0FBQSxNQUFBLEdBQUEsWUFBQSxHQUFBLFVBQUEsS0FBQSxlQUFBLFNBQUEsR0FBQSxPQUFBLEVBQUEsWUFBQSxHQUFBLFVBQUEsUUFBQSxPQUFBLE9BQUEsU0NEQSxJQUFBLE9BQ0EsVUFDQSxRQUFBLEVBQUEsZUFDQSxLQUFBLEVBQUEsWUFDQSxTQUFBLEVBQUEsZ0JBQ0EsR0FBQSxFQUFBLFVBQ0EsVUFBQSxFQUFBLHFCQUNBLFFBQUEsRUFDQSxhQUFBLEdBRUEsS0FBQSxXQUNBLEtBQUEsaUJBRUEsY0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxRQUFBLE1BQUEsV0FDQSxLQUFBLFdBRUEsRUFBQSxHQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxVQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxTQUFBLE1BQUEsV0FDQSxLQUFBLFVBRUEsRUFBQSxRQUFBLFFBQUEsU0FBQSxHQUNBLEtBQUEsRUFBQSxPQUFBLEtBQUEsV0FHQSxPQUFBLFdBQ0EsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLE9BQUEsS0FBQSxRQUFBLEtBQUEsUUFFQSxLQUFBLFdBQ0EsUUFBQSxLQUNBLEVBQUEsS0FBQSxTQUFBLGFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsSUFBQSxVQUFBLFNBQ0EsV0FBQSxFQUFBLE9BR0EsTUFBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLEtBQUEsSUFBQSxVQUFBLFFBQ0EsRUFBQSxhQUFBLEVBRUEsR0FBQSxHQUFBLEtBQUEsUUFDQSxHQUFBLGVBQUEsSUFDQSxFQUFBLFFBQUEsRUFDQSxFQUFBLGFBQUEsRUFDQSxFQUFBLEtBQUEsWUFBQSxhQUNBLFdBQUEsRUFBQSxTQUdBLFFBQ0EsVUFDQSxRQUFBLEVBQUEsWUFDQSxVQUFBLEVBQUEsaUJBQ0EsT0FBQSxFQUFBLGNBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSx1QkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsVUFBQSxNQUFBLFdBQ0EsT0FBQSxXQUdBLEVBQUEsUUFBQSxNQUFBLFdBQ0EsT0FBQSxJQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsT0FBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxPQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLE9BQUEsUUFBQSxPQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLE9BQUEsU0FBQSxhQUNBLEVBQUEsUUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxPQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUlBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxPQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxPQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsU0FLQSxLQUNBLFVBQ0EsT0FBQSxFQUFBLGNBQ0EsSUFBQSxFQUFBLFlBQ0EsU0FBQSxFQUFBLGdCQUNBLEdBQUEsRUFBQSxVQUNBLFVBQUEsRUFBQSxvQkFDQSxRQUFBLEVBQ0EsYUFBQSxHQUVBLEtBQUEsV0FDQSxLQUFBLGlCQUVBLGNBQUEsV0FDQSxHQUFBLEdBQUEsS0FBQSxRQUNBLEdBQUEsT0FBQSxNQUFBLFdBQ0EsSUFBQSxXQUVBLEVBQUEsR0FBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsVUFBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsU0FBQSxNQUFBLFdBQ0EsSUFBQSxVQUVBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxLQUFBLEVBQUEsT0FBQSxJQUFBLFdBR0EsT0FBQSxXQUNBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxPQUFBLElBQUEsUUFBQSxJQUFBLFFBRUEsS0FBQSxXQUNBLFFBQUEsS0FDQSxFQUFBLElBQUEsU0FBQSxhQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxJQUFBLElBQUEsVUFBQSxTQUNBLFdBQUEsRUFBQSxPQUdBLE1BQUEsV0FDQSxRQUFBLEtBQ0EsRUFBQSxJQUFBLElBQUEsVUFBQSxRQUNBLEVBQUEsYUFBQSxFQUVBLEdBQUEsR0FBQSxLQUFBLFFBQ0EsR0FBQSxlQUFBLElBQ0EsRUFBQSxRQUFBLEVBQ0EsRUFBQSxhQUFBLEVBQ0EsRUFBQSxJQUFBLFlBQUEsYUFDQSxXQUFBLEVBQUEsUUFLQSxHQUFBLFVBQUEsTUFBQSxXQUNBLEtBQUEsT0FDQSxPQUFBLE9BQ0EsSUFBQSxRQ3BNQSxJQUFBLGNBTUEsU0FBQSxVQUFBLElBQUEsU0FBQSxFQUFBLGVBQUEsSUFBQSxjQUFBLElBQUEsTUFFQSxZQUFBLHlDQUVBLGNBQUEsUUFBQSxFQUFBLFFBQUEsR0FFQSxjQUFBLE9BRUEsT0FBQSxXQUFBLEVBQUEsZUFBQSxHQUdBLFNBQUEsV0FFQSxLQUFBLGlCQUVBLEtBQUEsU0FBQSxLQUFBLFFBQUEsR0FFQSxJQUFBLEdBQUEsTUFBQSxLQUFBLFFBQUEsVUFBQSxLQUFBLFFBQUEsU0FBQSxTQUFBLEtBQUEsUUFBQSxTQUlBLEdBRkEsZ0JBQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxHQUFBLE9BRUEsT0FBQSxJQUFBLEdBQUEsU0FBQSxJQUlBLEVBRUEsS0FBQSxNQUFBLFNBQUEsVUFBQSxHQUFBLEtBQUEsUUFBQSxpQkFLQSxVQUFBLFdBRUEsR0FBQSxHQUFBLE9BQUEsUUFFQSxFQUFBLEVBQUEsYUFBQSxFQUFBLFFBQUEsS0FBQSxTQUFBLFFBQUEsS0FBQSxhQUFBLFFBRUEsRUFBQSxFQUFBLFlBQUEsRUFBQSxTQUFBLEtBQUEsU0FBQSxTQUFBLEtBQUEsYUFBQSxPQUVBLE1BQUEsU0FBQSxLQUFBLEtBQUEsRUFBQSxLQUFBLElBQUEsRUFBQSxRQUtBLGNBQUEsV0FJQSxHQUFBLEdBQUEsT0FBQSxRQUFBLFdBRUEsTUFBQSxpQkFFQSxLQUFBLFlBRUEsS0FBQSxNQUFBLGNBQUEsR0FBQSxLQUFBLFFBQUEsV0FBQSxHQUFBLEVBRUEsS0FBQSxNQUFBLGdCQUFBLEtBQUEsTUFBQSxXQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsR0FJQSxHQUFBLEtBQUEsTUFBQSxlQUFBLEtBQUEsTUFBQSxZQUVBLEtBQUEsU0FBQSxPQUFBLFNBQUEsUUFBQSxHQUFBLEtBQUEsUUFBQSxhQUFBLElBRUEsS0FBQSxNQUFBLFdBQUEsSUFLQSxLQUFBLFdBQ0EsT0FBQSxVQUFBLE1BQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxZQUNBLEVBQUEsU0FBQSxHQUNBLEdBQUEsaUJBQUEsR0FBQSxHQUFBLGNBQUEsU0FBQSxZQUFBLE9BQUEsZUFDQSxFQUFBLE1BQUEsT0FBQSxNQUFBLGNBQUEsU0FBQSxXQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxhQUNBLEVBQUEsU0FBQSxFQUFBLHdCQUFBLEVBQUEsWUFBQSxVQUNBLEtBQUEsU0FBQSxFQUFBLGdCQUFBLFFBQUEsV0FBQSxPQUFBLEVBQUEsYUFBQSxRQUFBLE1BQUEsRUFBQSxhQUFBLFFBQUEsUUFBQSxFQUFBLE9BQUEsWUFDQSxNQUFBLE1BQUEsa0JBQ0EsTUFBQSxXQUFBLE1BQUEsR0FBQSxZQUFBLElBQ0EsU0FBQSxRQUNBLFNBQUEsTUFBQSxPQUFBLGdCQUFBLElBQUEsRUFBQSxTQUFBLFFBQ0EsRUFBQSxTQUFBLEtBQUEsTUFBQSxFQUFBLFNBQUEsVUFDQSxFQUFBLGdCQUVBLEVBQUEsV0FBQSxFQUFBLGNBQUEsTUFBQSxNQUFBLFdBRUEsTUFEQSxHQUFBLFlBQ0EsSUFFQSxFQUFBLFFBQUEsS0FBQSxnQkFBQSxXQUNBLEVBQUEscUJBS0EsYUFBQSxPQ3pHQSxXQUVBLFFBQUEsR0FBQSxHQUNBLEVBQUEsR0FBQSxPQUFBLE1BQ0EsRUFBQSxnQkFDQSxFQUFBLGlCQUNBLEVBQUEsYUFBQSxFQUdBLFFBQUEsR0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxLQUNBLEdBQUEsRUFBQSxVQUFBLEVBQUEsR0FFQSxNQURBLEdBQUEsR0FDQSxPQUtBLFFBQUEsR0FBQSxHQUNBLEVBQUEsR0FHQSxRQUFBLE1BY0EsUUFBQSxLQUlBLE9BQUEsYUFBQSxTQUFBLGFBQUEsRUFDQSxTQUFBLFVBQUEsRUFDQSxTQUFBLEtBQUEsWUFBQSxFQUdBLFFBQUEsS0FDQSxPQUFBLGFBQUEsU0FBQSxhQUFBLFNBQUEsVUFBQSxTQUFBLEtBQUEsWUFBQSxLQVVBLFFBQUEsS0FDQSxNQUFBLFFBQUEsYUFBQSxFQUFBLFVBR0EsUUFBQSxLQUdBLEdBRkEsRUFBQSxJQUVBLEVBQUEsQ0FDQSxHQUFBLEVBQUEsRUFBQSxPQUFBLENBRUEsUUFBQSxTQUFBLEVBQUEsR0FHQSxNQUFBLElBQ0EsR0FHQSxHQUFBLEdBQUEsRUFDQSxFQUFBLEdBRUEsRUFBQSxJQUFBLEdBQ0EsRUFBQSxHQUpBLFFBUUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxFQUVBLEVBQ0EsRUFBQSxTQUFBLFdBRUEsR0FBQSxFQUNBLElBQ0EsRUFBQSxZQUFBLFdBRUEsR0FBQSxFQUNBLEdBQUEsRUFDQSxJQUNBLEdBQUEsRUFDQSxLQUlBLFdBQUEsV0FDQSxHQUFBLEVBQ0EsR0FBQSxFQUNBLElBQ0EsR0FBQSxFQUNBLE1BRUEsS0F6R0EsR0FpREEsR0FDQSxFQUNBLEVBQ0EsRUFwREEsR0FBQSxHQUFBLEdBQUEsR0FBQSxHQUFBLElBZ0RBLEVBQUEsT0FBQSxTQUFBLGdCQUtBLEVBQUEsRUFBQSxrQkF3REEsRUFBQSxHQUNBLEdBQUEsSUFBQSxFQUlBLElBQ0EsR0FBQSxFQUNBLEVBQUEsU0FBQSxXQUdBLFNBQUEsS0FBQSxhQUFBLEtBQ0EsRUFBQSxRQUFBLE9BQUEiLCJmaWxlIjoiYmlnZXJ0ZWNoLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogY2JwQW5pbWF0ZWRIZWFkZXIuanMgdjEuMC4wXG4gKiBodHRwOi8vd3d3LmNvZHJvcHMuY29tXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAqXG4gKiBDb3B5cmlnaHQgMjAxMywgQ29kcm9wc1xuICogaHR0cDovL3d3dy5jb2Ryb3BzLmNvbVxuICovXG52YXIgYW5pbWF0ZWRIZWFkZXIgPSAoZnVuY3Rpb24oKSB7XG5cblx0dmFyIGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXG5cdFx0bmF2YmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5uYXZiYXInICksXG5cdFx0ZGlkU2Nyb2xsID0gZmFsc2UsXG5cdFx0Y2hhbmdlSGVhZGVyT24gPSAzMTI7XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Njcm9sbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGlmKCAhZGlkU2Nyb2xsICkge1xuXHRcdFx0XHRkaWRTY3JvbGwgPSB0cnVlO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCBzY3JvbGxQYWdlLCAyNTAgKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSApO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2Nyb2xsUGFnZSgpIHtcblx0XHR2YXIgc3kgPSBzY3JvbGxZKCk7XG5cdFx0aWYgKCBzeSA+PSBjaGFuZ2VIZWFkZXJPbiApIHtcblx0XHRcdGNsYXNzaWUuYWRkKCBuYXZiYXIsICduYXZiYXItcGlubmVkJyApO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNsYXNzaWUucmVtb3ZlKCBuYXZiYXIsICduYXZiYXItcGlubmVkJyApO1xuXHRcdH1cblxuXHRcdGRpZFNjcm9sbCA9IGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2Nyb2xsWSgpIHtcblx0XHRyZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wO1xuXHR9XG5cblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmhvbWUtdGVtcGxhdGUnICkgKSB7XG5cdFx0aWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPiA3NjggKSB7XG5cdFx0XHRpbml0KCk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmNhdGVnb3J5LXRlbXBsYXRlJyApICkge1xuXHRcdGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5hcmNoaXZlLXRlbXBsYXRlJyApICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+IDc2OCApIHtcblx0XHRcdFx0aW5pdCgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGlmICggZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJy5hdXRob3ItdGVtcGxhdGUnICkgKSB7XG5cdFx0aWYgKCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLmFyY2hpdmUtdGVtcGxhdGUnICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoID4gNzY4ICkge1xuXHRcdFx0XHRpbml0KCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cbn0pKCk7XG4iLCIvKiFcclxuICogY2xhc3NpZSB2MS4wLjFcclxuICogY2xhc3MgaGVscGVyIGZ1bmN0aW9uc1xyXG4gKiBmcm9tIGJvbnpvIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvYm9uem9cclxuICogTUlUIGxpY2Vuc2VcclxuICpcclxuICogY2xhc3NpZS5oYXMoIGVsZW0sICdteS1jbGFzcycgKSAtPiB0cnVlL2ZhbHNlXHJcbiAqIGNsYXNzaWUuYWRkKCBlbGVtLCAnbXktbmV3LWNsYXNzJyApXHJcbiAqIGNsYXNzaWUucmVtb3ZlKCBlbGVtLCAnbXktdW53YW50ZWQtY2xhc3MnIClcclxuICogY2xhc3NpZS50b2dnbGUoIGVsZW0sICdteS1jbGFzcycgKVxyXG4gKi9cclxuXHJcbi8qanNoaW50IGJyb3dzZXI6IHRydWUsIHN0cmljdDogdHJ1ZSwgdW5kZWY6IHRydWUsIHVudXNlZDogdHJ1ZSAqL1xyXG4vKmdsb2JhbCBkZWZpbmU6IGZhbHNlLCBtb2R1bGU6IGZhbHNlICovXHJcblxyXG4oIGZ1bmN0aW9uKCB3aW5kb3cgKSB7XHJcblxyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbi8vIGNsYXNzIGhlbHBlciBmdW5jdGlvbnMgZnJvbSBib256byBodHRwczovL2dpdGh1Yi5jb20vZGVkL2JvbnpvXHJcblxyXG4gIGZ1bmN0aW9uIGNsYXNzUmVnKCBjbGFzc05hbWUgKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChcIihefFxcXFxzKylcIiArIGNsYXNzTmFtZSArIFwiKFxcXFxzK3wkKVwiKTtcclxuICB9XHJcblxyXG4vLyBjbGFzc0xpc3Qgc3VwcG9ydCBmb3IgY2xhc3MgbWFuYWdlbWVudFxyXG4vLyBhbHRobyB0byBiZSBmYWlyLCB0aGUgYXBpIHN1Y2tzIGJlY2F1c2UgaXQgd29uJ3QgYWNjZXB0IG11bHRpcGxlIGNsYXNzZXMgYXQgb25jZVxyXG4gIHZhciBoYXNDbGFzcywgYWRkQ2xhc3MsIHJlbW92ZUNsYXNzO1xyXG5cclxuICBpZiAoICdjbGFzc0xpc3QnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCApIHtcclxuICAgIGhhc0NsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgIHJldHVybiBlbGVtLmNsYXNzTGlzdC5jb250YWlucyggYyApO1xyXG4gICAgfTtcclxuICAgIGFkZENsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCggYyApO1xyXG4gICAgfTtcclxuICAgIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSggYyApO1xyXG4gICAgfTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBoYXNDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICByZXR1cm4gY2xhc3NSZWcoIGMgKS50ZXN0KCBlbGVtLmNsYXNzTmFtZSApO1xyXG4gICAgfTtcclxuICAgIGFkZENsYXNzID0gZnVuY3Rpb24oIGVsZW0sIGMgKSB7XHJcbiAgICAgIGlmICggIWhhc0NsYXNzKCBlbGVtLCBjICkgKSB7XHJcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBlbGVtLmNsYXNzTmFtZSArICcgJyArIGM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICByZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKCBlbGVtLCBjICkge1xyXG4gICAgICBlbGVtLmNsYXNzTmFtZSA9IGVsZW0uY2xhc3NOYW1lLnJlcGxhY2UoIGNsYXNzUmVnKCBjICksICcgJyApO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzKCBlbGVtLCBjICkge1xyXG4gICAgdmFyIGZuID0gaGFzQ2xhc3MoIGVsZW0sIGMgKSA/IHJlbW92ZUNsYXNzIDogYWRkQ2xhc3M7XHJcbiAgICBmbiggZWxlbSwgYyApO1xyXG4gIH1cclxuXHJcbiAgdmFyIGNsYXNzaWUgPSB7XHJcbiAgICAvLyBmdWxsIG5hbWVzXHJcbiAgICBoYXNDbGFzczogaGFzQ2xhc3MsXHJcbiAgICBhZGRDbGFzczogYWRkQ2xhc3MsXHJcbiAgICByZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXHJcbiAgICB0b2dnbGVDbGFzczogdG9nZ2xlQ2xhc3MsXHJcbiAgICAvLyBzaG9ydCBuYW1lc1xyXG4gICAgaGFzOiBoYXNDbGFzcyxcclxuICAgIGFkZDogYWRkQ2xhc3MsXHJcbiAgICByZW1vdmU6IHJlbW92ZUNsYXNzLFxyXG4gICAgdG9nZ2xlOiB0b2dnbGVDbGFzc1xyXG4gIH07XHJcblxyXG4vLyB0cmFuc3BvcnRcclxuICBpZiAoIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCApIHtcclxuICAgIC8vIEFNRFxyXG4gICAgZGVmaW5lKCBjbGFzc2llICk7XHJcbiAgfSBlbHNlIGlmICggdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICkge1xyXG4gICAgLy8gQ29tbW9uSlNcclxuICAgIG1vZHVsZS5leHBvcnRzID0gY2xhc3NpZTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gYnJvd3NlciBnbG9iYWxcclxuICAgIHdpbmRvdy5jbGFzc2llID0gY2xhc3NpZTtcclxuICB9XHJcblxyXG59KSggd2luZG93ICk7IiwialF1ZXJ5KGZ1bmN0aW9uKCQpIHtcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIk1TSUVcIikgPCAwKSB7XG4gICAgICAvL0lFOCDkuI3mlK/mjIFjb25zb2xlXG4gICAgICBjb25zb2xlLmxvZyhcIl5fXiDmg7PliqDlhaXnrJTmiIjnp5HmioDlvIDlj5Hlm6LpmJ/vvJ/or7flj5HpgIHpgq7ku7bliLAgbGl1eGluZ0BtZWl6dS5jb21cIik7XG4gIH1cblxuICBpZigkKFwiaW1nLmxhenlcIikgJiYgJChcImltZy5sYXp5XCIpLmxlbmd0aCA+IDApXG4gICAgJChcImltZy5sYXp5XCIpLmxhenlsb2FkKHtcbiAgICAgIGVmZmVjdDogXCJmYWRlSW5cIixcbiAgICAgIHRocmVzaG9sZCA6IDMwMFxuICAgIH0pO1xuXG4gICQoZG9jdW1lbnQpLnJlYWR5KCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBxcmNvZGUgPSAkKFwiLnFyY29kZVwiKTtcbiAgICAgICQoXCIuaWNvbi13ZWNoYXRcIikuaG92ZXIoZnVuY3Rpb24oKXtcbiAgICAgICAgICB2YXIgcG9zID0gJCh0aGlzKS5wb3NpdGlvbigpO1xuICAgICAgICAgIHFyY29kZS5jc3MoXCJsZWZ0XCIsICgkKHdpbmRvdykud2lkdGgoKS1xcmNvZGUud2lkdGgoKSkvMik7XG4gICAgICAgICAgcXJjb2RlLmNzcyhcInRvcFwiLCBwb3MudG9wLTI3MCk7XG4gICAgICAgICAgcXJjb2RlLmZhZGVJbigpLnNob3coKTtcbiAgICAgIH0sZnVuY3Rpb24oKXtcbiAgICAgICAgICBxcmNvZGUuaGlkZSgpO1xuICAgICAgfSk7XG4gIH0pO1xufSk7XG4iLCIvKiEgTGF6eSBMb2FkIDEuOS4zIC0gTUlUIGxpY2Vuc2UgLSBDb3B5cmlnaHQgMjAxMC0yMDEzIE1pa2EgVHV1cG9sYSAqL1xuIWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEoYik7YS5mbi5sYXp5bG9hZD1mdW5jdGlvbihmKXtmdW5jdGlvbiBnKCl7dmFyIGI9MDtpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpO2lmKCFqLnNraXBfaW52aXNpYmxlfHxjLmlzKFwiOnZpc2libGVcIikpaWYoYS5hYm92ZXRoZXRvcCh0aGlzLGopfHxhLmxlZnRvZmJlZ2luKHRoaXMsaikpO2Vsc2UgaWYoYS5iZWxvd3RoZWZvbGQodGhpcyxqKXx8YS5yaWdodG9mZm9sZCh0aGlzLGopKXtpZigrK2I+ai5mYWlsdXJlX2xpbWl0KXJldHVybiExfWVsc2UgYy50cmlnZ2VyKFwiYXBwZWFyXCIpLGI9MH0pfXZhciBoLGk9dGhpcyxqPXt0aHJlc2hvbGQ6MCxmYWlsdXJlX2xpbWl0OjAsZXZlbnQ6XCJzY3JvbGxcIixlZmZlY3Q6XCJzaG93XCIsY29udGFpbmVyOmIsZGF0YV9hdHRyaWJ1dGU6XCJvcmlnaW5hbFwiLHNraXBfaW52aXNpYmxlOiEwLGFwcGVhcjpudWxsLGxvYWQ6bnVsbCxwbGFjZWhvbGRlcjpcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQkNBWUFBQUFmRmNTSkFBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc1FBQUE3RUFaVXJEaHNBQUFBTlNVUkJWQmhYWXpoOCtQQi9BQWZmQTBuTlB1Q0xBQUFBQUVsRlRrU3VRbUNDXCJ9O3JldHVybiBmJiYoZCE9PWYuZmFpbHVyZWxpbWl0JiYoZi5mYWlsdXJlX2xpbWl0PWYuZmFpbHVyZWxpbWl0LGRlbGV0ZSBmLmZhaWx1cmVsaW1pdCksZCE9PWYuZWZmZWN0c3BlZWQmJihmLmVmZmVjdF9zcGVlZD1mLmVmZmVjdHNwZWVkLGRlbGV0ZSBmLmVmZmVjdHNwZWVkKSxhLmV4dGVuZChqLGYpKSxoPWouY29udGFpbmVyPT09ZHx8ai5jb250YWluZXI9PT1iP2U6YShqLmNvbnRhaW5lciksMD09PWouZXZlbnQuaW5kZXhPZihcInNjcm9sbFwiKSYmaC5iaW5kKGouZXZlbnQsZnVuY3Rpb24oKXtyZXR1cm4gZygpfSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPWEoYik7Yi5sb2FkZWQ9ITEsKGMuYXR0cihcInNyY1wiKT09PWR8fGMuYXR0cihcInNyY1wiKT09PSExKSYmYy5pcyhcImltZ1wiKSYmYy5hdHRyKFwic3JjXCIsai5wbGFjZWhvbGRlciksYy5vbmUoXCJhcHBlYXJcIixmdW5jdGlvbigpe2lmKCF0aGlzLmxvYWRlZCl7aWYoai5hcHBlYXIpe3ZhciBkPWkubGVuZ3RoO2ouYXBwZWFyLmNhbGwoYixkLGopfWEoXCI8aW1nIC8+XCIpLmJpbmQoXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgZD1jLmF0dHIoXCJkYXRhLVwiK2ouZGF0YV9hdHRyaWJ1dGUpO2MuaGlkZSgpLGMuaXMoXCJpbWdcIik/Yy5hdHRyKFwic3JjXCIsZCk6Yy5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsXCJ1cmwoJ1wiK2QrXCInKVwiKSxjW2ouZWZmZWN0XShqLmVmZmVjdF9zcGVlZCksYi5sb2FkZWQ9ITA7dmFyIGU9YS5ncmVwKGksZnVuY3Rpb24oYSl7cmV0dXJuIWEubG9hZGVkfSk7aWYoaT1hKGUpLGoubG9hZCl7dmFyIGY9aS5sZW5ndGg7ai5sb2FkLmNhbGwoYixmLGopfX0pLmF0dHIoXCJzcmNcIixjLmF0dHIoXCJkYXRhLVwiK2ouZGF0YV9hdHRyaWJ1dGUpKX19KSwwIT09ai5ldmVudC5pbmRleE9mKFwic2Nyb2xsXCIpJiZjLmJpbmQoai5ldmVudCxmdW5jdGlvbigpe2IubG9hZGVkfHxjLnRyaWdnZXIoXCJhcHBlYXJcIil9KX0pLGUuYmluZChcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7ZygpfSksLyg/OmlwaG9uZXxpcG9kfGlwYWQpLipvcyA1L2dpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pJiZlLmJpbmQoXCJwYWdlc2hvd1wiLGZ1bmN0aW9uKGIpe2Iub3JpZ2luYWxFdmVudCYmYi5vcmlnaW5hbEV2ZW50LnBlcnNpc3RlZCYmaS5lYWNoKGZ1bmN0aW9uKCl7YSh0aGlzKS50cmlnZ2VyKFwiYXBwZWFyXCIpfSl9KSxhKGMpLnJlYWR5KGZ1bmN0aW9uKCl7ZygpfSksdGhpc30sYS5iZWxvd3RoZWZvbGQ9ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj8oYi5pbm5lckhlaWdodD9iLmlubmVySGVpZ2h0OmUuaGVpZ2h0KCkpK2Uuc2Nyb2xsVG9wKCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkudG9wK2EoZi5jb250YWluZXIpLmhlaWdodCgpLGc8PWEoYykub2Zmc2V0KCkudG9wLWYudGhyZXNob2xkfSxhLnJpZ2h0b2Zmb2xkPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS53aWR0aCgpK2Uuc2Nyb2xsTGVmdCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLmxlZnQrYShmLmNvbnRhaW5lcikud2lkdGgoKSxnPD1hKGMpLm9mZnNldCgpLmxlZnQtZi50aHJlc2hvbGR9LGEuYWJvdmV0aGV0b3A9ZnVuY3Rpb24oYyxmKXt2YXIgZztyZXR1cm4gZz1mLmNvbnRhaW5lcj09PWR8fGYuY29udGFpbmVyPT09Yj9lLnNjcm9sbFRvcCgpOmEoZi5jb250YWluZXIpLm9mZnNldCgpLnRvcCxnPj1hKGMpLm9mZnNldCgpLnRvcCtmLnRocmVzaG9sZCthKGMpLmhlaWdodCgpfSxhLmxlZnRvZmJlZ2luPWZ1bmN0aW9uKGMsZil7dmFyIGc7cmV0dXJuIGc9Zi5jb250YWluZXI9PT1kfHxmLmNvbnRhaW5lcj09PWI/ZS5zY3JvbGxMZWZ0KCk6YShmLmNvbnRhaW5lcikub2Zmc2V0KCkubGVmdCxnPj1hKGMpLm9mZnNldCgpLmxlZnQrZi50aHJlc2hvbGQrYShjKS53aWR0aCgpfSxhLmludmlld3BvcnQ9ZnVuY3Rpb24oYixjKXtyZXR1cm4hKGEucmlnaHRvZmZvbGQoYixjKXx8YS5sZWZ0b2ZiZWdpbihiLGMpfHxhLmJlbG93dGhlZm9sZChiLGMpfHxhLmFib3ZldGhldG9wKGIsYykpfSxhLmV4dGVuZChhLmV4cHJbXCI6XCJdLHtcImJlbG93LXRoZS1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEuYmVsb3d0aGVmb2xkKGIse3RocmVzaG9sZDowfSl9LFwiYWJvdmUtdGhlLXRvcFwiOmZ1bmN0aW9uKGIpe3JldHVybiFhLmJlbG93dGhlZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcInJpZ2h0LW9mLXNjcmVlblwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9LFwibGVmdC1vZi1zY3JlZW5cIjpmdW5jdGlvbihiKXtyZXR1cm4hYS5yaWdodG9mZm9sZChiLHt0aHJlc2hvbGQ6MH0pfSxcImluLXZpZXdwb3J0XCI6ZnVuY3Rpb24oYil7cmV0dXJuIGEuaW52aWV3cG9ydChiLHt0aHJlc2hvbGQ6MH0pfSxcImFib3ZlLXRoZS1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEuYmVsb3d0aGVmb2xkKGIse3RocmVzaG9sZDowfSl9LFwicmlnaHQtb2YtZm9sZFwiOmZ1bmN0aW9uKGIpe3JldHVybiBhLnJpZ2h0b2Zmb2xkKGIse3RocmVzaG9sZDowfSl9LFwibGVmdC1vZi1mb2xkXCI6ZnVuY3Rpb24oYil7cmV0dXJuIWEucmlnaHRvZmZvbGQoYix7dGhyZXNob2xkOjB9KX19KX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7IiwidmFyIE1lbnUgPSB7XG4gIHNldHRpbmdzOiB7XG4gICAgbWVudUJ0bjogJChcIi5qcy1tZW51QnRuXCIpLFxuICAgIG1lbnU6ICQoXCIuanMtbWVudVwiKSxcbiAgICBjbG9zZUJ0bjogJChcIi5qcy1jbG9zZUJ0blwiKSxcbiAgICBiZzogJChcIi5qcy1CZ1wiKSxcbiAgICBjb250YWluZXI6ICQoXCIuanMtbWVudUNvbnRhaW5lclwiKSxcbiAgICBpc09wZW46ICExLFxuICAgIGlzQW5pbWF0aW5nOiAhMVxuICB9LFxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5iaW5kVUlBY3Rpb25zKClcbiAgfSxcbiAgYmluZFVJQWN0aW9uczogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBlLm1lbnVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBNZW51LnRvZ2dsZSgpXG4gICAgfSk7XG4gICAgZS5iZy5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIE1lbnUuY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY29udGFpbmVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgTWVudS5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIE1lbnUuY2xvc2UoKVxuICAgIH0pO1xuICAgICQod2luZG93KS5rZXlkb3duKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUud2hpY2ggPT09IDI3ICYmIE1lbnUuY2xvc2UoKVxuICAgIH0pXG4gIH0sXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBlLmlzT3BlbiA/IE1lbnUuY2xvc2UoKSA6IE1lbnUub3BlbigpXG4gIH0sXG4gIG9wZW46IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICBlLm1lbnUuYWRkQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgIH1cbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgIGUuaXNPcGVuID0gITA7XG4gICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMDtcbiAgICAgICAgZS5tZW51LmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgc2V0VGltZW91dCh0LCAxMDApXG4gICAgfVxuICB9LFxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIGUubWVudS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICExXG4gICAgfVxuICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICBpZiAoZS5pc0FuaW1hdGluZyA9PT0gITEpIHtcbiAgICAgICAgZS5pc09wZW4gPSAhMTtcbiAgICAgICAgZS5pc0FuaW1hdGluZyA9ICEwO1xuICAgICAgICBlLm1lbnUucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgIHNldFRpbWVvdXQodCwgMTIwMClcbiAgICB9XG4gIH1cbn0sIFNlYXJjaCA9IHtcbiAgc2V0dGluZ3M6IHtcbiAgICAgIHRleHRCb3g6ICQoXCIudGV4dGJveFwiKSxcbiAgICAgIHNlYXJjaEJ0bjogJChcIi5qcy1zZWFyY2hCdG5cIiksXG4gICAgICBzZWFyY2g6ICQoXCIuanMtc2VhcmNoXCIpLFxuICAgICAgY2xvc2VCdG46ICQoXCIuanMtY2xvc2VCdG5cIiksXG4gICAgICBiZzogJChcIi5qcy1CZ1wiKSxcbiAgICAgIGNvbnRhaW5lcjogJChcIi5qcy1zZWFyY2hDb250YWluZXJcIiksXG4gICAgICBpc09wZW46ICExLFxuICAgICAgaXNBbmltYXRpbmc6ICExXG4gIH0sXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuYmluZFVJQWN0aW9ucygpXG4gIH0sXG4gIGJpbmRVSUFjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5zZWFyY2hCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBTZWFyY2gudG9nZ2xlKClcbiAgICB9KTtcbiAgICAvLyDlpITnkIbmkJzntKLmoYbpmLvmraLlhpLms6FcbiAgICBlLnRleHRCb3guY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICAgIGUuYmcuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBTZWFyY2guY2xvc2UoKVxuICAgIH0pO1xuICAgIGUuY29udGFpbmVyLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU2VhcmNoLmNsb3NlKClcbiAgICB9KTtcbiAgICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLndoaWNoID09PSAyNyAmJiBTZWFyY2guY2xvc2UoKVxuICAgIH0pXG4gIH0sXG4gIHRvZ2dsZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgICAgZS5pc09wZW4gPyBTZWFyY2guY2xvc2UoKSA6IFNlYXJjaC5vcGVuKClcbiAgfSxcbiAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgICAgZnVuY3Rpb24gdCgpIHtcbiAgICAgICAgICBlLnNlYXJjaC5hZGRDbGFzcyhcImlzLWFjdGl2ZVwiKTtcbiAgICAgICAgICBlLnRleHRCb3guZm9jdXMoKTtcbiAgICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICAgIH1cbiAgICAgIHZhciBlID0gdGhpcy5zZXR0aW5ncztcbiAgICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICAgIGUuaXNPcGVuID0gITA7XG4gICAgICAgICAgZS5zZWFyY2guY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgIHNldFRpbWVvdXQodCwgMTAwKVxuICAgICAgfVxuXG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICAgIGUuc2VhcmNoLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgIGUuaXNBbmltYXRpbmcgPSAhMVxuICAgICAgfVxuICAgICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgICAgaWYgKGUuaXNBbmltYXRpbmcgPT09ICExKSB7XG4gICAgICAgICAgZS5pc09wZW4gPSAhMTtcbiAgICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgICAgZS5zZWFyY2gucmVtb3ZlQ2xhc3MoXCJpcy1hY3RpdmVcIik7XG4gICAgICAgICAgc2V0VGltZW91dCh0LCAxMjAwKVxuICAgICAgfVxuICB9LFxufTtcblxudmFyIFRhZyA9IHtcbiAgc2V0dGluZ3M6IHtcbiAgICB0YWdCdG46ICQoXCIuanMtdGFnQnRuXCIpLFxuICAgIHRhZzogJChcIi5qcy10YWdzXCIpLFxuICAgIGNsb3NlQnRuOiAkKFwiLmpzLWNsb3NlQnRuXCIpLFxuICAgIGJnOiAkKFwiLmpzLUJnXCIpLFxuICAgIGNvbnRhaW5lcjogJChcIi5qcy10YWdDb250YWluZXJcIiksXG4gICAgaXNPcGVuOiAhMSxcbiAgICBpc0FuaW1hdGluZzogITFcbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYmluZFVJQWN0aW9ucygpXG4gIH0sXG4gIGJpbmRVSUFjdGlvbnM6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS50YWdCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBUYWcudG9nZ2xlKClcbiAgICB9KTtcbiAgICBlLmJnLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgVGFnLmNsb3NlKClcbiAgICB9KTtcbiAgICBlLmNvbnRhaW5lci5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFRhZy5jbG9zZSgpXG4gICAgfSk7XG4gICAgZS5jbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIFRhZy5jbG9zZSgpXG4gICAgfSk7XG4gICAgJCh3aW5kb3cpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS53aGljaCA9PT0gMjcgJiYgVGFnLmNsb3NlKClcbiAgICB9KVxuICB9LFxuICB0b2dnbGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZSA9IHRoaXMuc2V0dGluZ3M7XG4gICAgZS5pc09wZW4gPyBUYWcuY2xvc2UoKSA6IFRhZy5vcGVuKClcbiAgfSxcbiAgb3BlbjogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIGUudGFnLmFkZENsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICB9XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICBlLmlzT3BlbiA9ICEwO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgIGUudGFnLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgc2V0VGltZW91dCh0LCAxMDApXG4gICAgfVxuICB9LFxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIGUudGFnLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITFcbiAgICB9XG4gICAgdmFyIGUgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmIChlLmlzQW5pbWF0aW5nID09PSAhMSkge1xuICAgICAgICBlLmlzT3BlbiA9ICExO1xuICAgICAgICBlLmlzQW5pbWF0aW5nID0gITA7XG4gICAgICAgIGUudGFnLnJlbW92ZUNsYXNzKFwiaXMtYWN0aXZlXCIpO1xuICAgICAgICBzZXRUaW1lb3V0KHQsIDEyMDApXG4gICAgfVxuICB9XG59O1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gIE1lbnUuaW5pdCgpO1xuICBTZWFyY2guaW5pdCgpO1xuICBUYWcuaW5pdCgpO1xufSk7XG4iLCJ2YXIgc2Nyb2xsdG90b3A9e1xyXG5cclxuICAgIC8vc3RhcnRsaW5lOiBJbnRlZ2VyLiBOdW1iZXIgb2YgcGl4ZWxzIGZyb20gdG9wIG9mIGRvYyBzY3JvbGxiYXIgaXMgc2Nyb2xsZWQgYmVmb3JlIHNob3dpbmcgY29udHJvbFxyXG5cclxuICAgIC8vc2Nyb2xsdG86IEtleXdvcmQgKEludGVnZXIsIG9yIFwiU2Nyb2xsX3RvX0VsZW1lbnRfSURcIikuIEhvdyBmYXIgdG8gc2Nyb2xsIGRvY3VtZW50IHVwIHdoZW4gY29udHJvbCBpcyBjbGlja2VkIG9uICgwPXRvcCkuXHJcblxyXG4gICAgc2V0dGluZzoge3N0YXJ0bGluZToxMDAsIHNjcm9sbHRvOiAwLCBzY3JvbGxkdXJhdGlvbjoxMDAwLCBmYWRlZHVyYXRpb246WzUwMCwgMTAwXX0sXHJcblxyXG4gICAgY29udHJvbEhUTUw6IFwiPGRpdiBpZD0ndG9Ub3AnIGNsYXNzPSdpY29uLXVwJz48L2Rpdj5cIiwgLy9IVE1MIGZvciBjb250cm9sLCB3aGljaCBpcyBhdXRvIHdyYXBwZWQgaW4gRElWIHcvIElEPVwidG9wY29udHJvbFwiXHJcblxyXG4gICAgY29udHJvbGF0dHJzOiB7b2Zmc2V0eDo1LCBvZmZzZXR5OjV9LCAvL29mZnNldCBvZiBjb250cm9sIHJlbGF0aXZlIHRvIHJpZ2h0LyBib3R0b20gb2Ygd2luZG93IGNvcm5lclxyXG5cclxuICAgIGFuY2hvcmtleXdvcmQ6ICcjdG9wJywgLy9FbnRlciBocmVmIHZhbHVlIG9mIEhUTUwgYW5jaG9ycyBvbiB0aGUgcGFnZSB0aGF0IHNob3VsZCBhbHNvIGFjdCBhcyBcIlNjcm9sbCBVcFwiIGxpbmtzXHJcblxyXG4gc3RhdGU6IHtpc3Zpc2libGU6ZmFsc2UsIHNob3VsZHZpc2libGU6ZmFsc2V9LFxyXG5cclxuXHJcbiAgICBzY3JvbGx1cDpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY3NzZml4ZWRzdXBwb3J0KSAvL2lmIGNvbnRyb2wgaXMgcG9zaXRpb25lZCB1c2luZyBKYXZhU2NyaXB0XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRjb250cm9sLmNzcyh7b3BhY2l0eTowfSkgLy9oaWRlIGNvbnRyb2wgaW1tZWRpYXRlbHkgYWZ0ZXIgY2xpY2tpbmcgaXRcclxuXHJcbiAgICAgICAgdmFyIGRlc3Q9aXNOYU4odGhpcy5zZXR0aW5nLnNjcm9sbHRvKT8gdGhpcy5zZXR0aW5nLnNjcm9sbHRvIDogcGFyc2VJbnQodGhpcy5zZXR0aW5nLnNjcm9sbHRvKVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGRlc3Q9PVwic3RyaW5nXCIgJiYgalF1ZXJ5KCcjJytkZXN0KS5sZW5ndGg9PTEpIC8vY2hlY2sgZWxlbWVudCBzZXQgYnkgc3RyaW5nIGV4aXN0c1xyXG5cclxuICAgICAgICAgICAgZGVzdD1qUXVlcnkoJyMnK2Rlc3QpLm9mZnNldCgpLnRvcFxyXG5cclxuICAgICAgICBlbHNlXHJcblxyXG4gICAgICAgICAgICBkZXN0PTBcclxuXHJcbiAgICAgICAgdGhpcy4kYm9keS5hbmltYXRlKHtzY3JvbGxUb3A6IGRlc3R9LCB0aGlzLnNldHRpbmcuc2Nyb2xsZHVyYXRpb24pO1xyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIGtlZXBmaXhlZDpmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICB2YXIgJHdpbmRvdz1qUXVlcnkod2luZG93KVxyXG5cclxuICAgICAgICB2YXIgY29udHJvbHg9JHdpbmRvdy5zY3JvbGxMZWZ0KCkgKyAkd2luZG93LndpZHRoKCkgLSB0aGlzLiRjb250cm9sLndpZHRoKCkgLSB0aGlzLmNvbnRyb2xhdHRycy5vZmZzZXR4XHJcblxyXG4gICAgICAgIHZhciBjb250cm9seT0kd2luZG93LnNjcm9sbFRvcCgpICsgJHdpbmRvdy5oZWlnaHQoKSAtIHRoaXMuJGNvbnRyb2wuaGVpZ2h0KCkgLSB0aGlzLmNvbnRyb2xhdHRycy5vZmZzZXR5XHJcblxyXG4gICAgICAgIHRoaXMuJGNvbnRyb2wuY3NzKHtsZWZ0OmNvbnRyb2x4KydweCcsIHRvcDpjb250cm9seSsncHgnfSlcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICB0b2dnbGVjb250cm9sOmZ1bmN0aW9uKCl7XHJcblxyXG5cclxuXHJcbiAgICAgICAgdmFyIHNjcm9sbHRvcD1qUXVlcnkod2luZG93KS5zY3JvbGxUb3AoKVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuY3NzZml4ZWRzdXBwb3J0KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5rZWVwZml4ZWQoKVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRlLnNob3VsZHZpc2libGU9KHNjcm9sbHRvcD49dGhpcy5zZXR0aW5nLnN0YXJ0bGluZSk/IHRydWUgOiBmYWxzZVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5zaG91bGR2aXNpYmxlICYmICF0aGlzLnN0YXRlLmlzdmlzaWJsZSl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRjb250cm9sLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OjF9LCB0aGlzLnNldHRpbmcuZmFkZWR1cmF0aW9uWzBdKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pc3Zpc2libGU9dHJ1ZVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc3RhdGUuc2hvdWxkdmlzaWJsZT09ZmFsc2UgJiYgdGhpcy5zdGF0ZS5pc3Zpc2libGUpe1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kY29udHJvbC5zdG9wKCkuYW5pbWF0ZSh7b3BhY2l0eTowfSwgdGhpcy5zZXR0aW5nLmZhZGVkdXJhdGlvblsxXSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaXN2aXNpYmxlPWZhbHNlXHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdDpmdW5jdGlvbigpe1xyXG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCl7XHJcbiAgICAgICAgICAgIHZhciBtYWlub2JqPXNjcm9sbHRvdG9wXHJcbiAgICAgICAgICAgIHZhciBpZWJyd3M9ZG9jdW1lbnQuYWxsXHJcbiAgICAgICAgICAgIG1haW5vYmouY3NzZml4ZWRzdXBwb3J0PSFpZWJyd3MgfHwgaWVicndzICYmIGRvY3VtZW50LmNvbXBhdE1vZGU9PVwiQ1NTMUNvbXBhdFwiICYmIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAvL25vdCBJRSBvciBJRTcrIGJyb3dzZXJzIGluIHN0YW5kYXJkcyBtb2RlXHJcbiAgICAgICAgICAgIG1haW5vYmouJGJvZHk9KHdpbmRvdy5vcGVyYSk/IChkb2N1bWVudC5jb21wYXRNb2RlPT1cIkNTUzFDb21wYXRcIj8gJCgnaHRtbCcpIDogJCgnYm9keScpKSA6ICQoJ2h0bWwsYm9keScpXHJcbiAgICAgICAgICAgIG1haW5vYmouJGNvbnRyb2w9JCgnPGRpdiBpZD1cInRvcGNvbnRyb2xcIj4nK21haW5vYmouY29udHJvbEhUTUwrJzwvZGl2PicpXHJcbiAgICAgICAgICAgICAgICAuY3NzKHtwb3NpdGlvbjptYWlub2JqLmNzc2ZpeGVkc3VwcG9ydD8gJ2ZpeGVkJyA6ICdhYnNvbHV0ZScsIGJvdHRvbTptYWlub2JqLmNvbnRyb2xhdHRycy5vZmZzZXR5LCByaWdodDptYWlub2JqLmNvbnRyb2xhdHRycy5vZmZzZXR4LCBvcGFjaXR5OjAsY3Vyc29yOidwb2ludGVyJ30pXHJcbiAgICAgICAgICAgICAgICAuYXR0cih7dGl0bGU6J1Njcm9sbCB0byBUb3AnfSlcclxuICAgICAgICAgICAgICAgIC5jbGljayhmdW5jdGlvbigpe21haW5vYmouc2Nyb2xsdXAoKTsgcmV0dXJuIGZhbHNlfSlcclxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbygnYm9keScpXHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiBtYWlub2JqLiRjb250cm9sLnRleHQoKSE9JycpIC8vbG9vc2UgY2hlY2sgZm9yIElFNiBhbmQgYmVsb3csIHBsdXMgd2hldGhlciBjb250cm9sIGNvbnRhaW5zIGFueSB0ZXh0XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLiRjb250cm9sLmNzcyh7d2lkdGg6bWFpbm9iai4kY29udHJvbC53aWR0aCgpfSkgLy9JRTYtIHNlZW1zIHRvIHJlcXVpcmUgYW4gZXhwbGljaXQgd2lkdGggb24gYSBESVYgY29udGFpbmluZyB0ZXh0XHJcbiAgICAgICAgICAgIG1haW5vYmoudG9nZ2xlY29udHJvbCgpXHJcblxyXG4kKCdhW2hyZWY9XCInICsgbWFpbm9iai5hbmNob3JrZXl3b3JkICsnXCJdJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIG1haW5vYmouc2Nyb2xsdXAoKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQod2luZG93KS5iaW5kKCdzY3JvbGwgcmVzaXplJywgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBtYWlub2JqLnRvZ2dsZWNvbnRyb2woKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuc2Nyb2xsdG90b3AuaW5pdCgpO1xyXG4iLCIoZnVuY3Rpb24gKCkge1xuICB2YXIga2V5cyA9IFszMiwgMzcsIDM4LCAzOSwgNDBdO1xuICBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChlKSB7XG4gICAgZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KVxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGtleWRvd24oZSkge1xuICAgIGZvciAodmFyIGkgPSBrZXlzLmxlbmd0aDsgaS0tOykge1xuICAgICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5c1tpXSkge1xuICAgICAgICBwcmV2ZW50RGVmYXVsdChlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvdWNobW92ZShlKSB7XG4gICAgcHJldmVudERlZmF1bHQoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNhYmxlV2hlZWwoZSkge1xuICAgIC8qZSA9IGUgfHwgd2luZG93LmV2ZW50O1xuICAgIGlmIChlLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7Ki9cbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc2FibGVfc2Nyb2xsKCkge1xuICAgIC8qaWYoIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPj0gNzY4ICkge1xuICAgICAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IGRpc2FibGVXaGVlbDtcbiAgICB9Ki9cbiAgICB3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gZGlzYWJsZVdoZWVsO1xuICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGtleWRvd247XG4gICAgZG9jdW1lbnQuYm9keS5vbnRvdWNobW92ZSA9IHRvdWNobW92ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuYWJsZV9zY3JvbGwoKSB7XG4gICAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ua2V5ZG93biA9IGRvY3VtZW50LmJvZHkub250b3VjaG1vdmUgPSBudWxsO1xuICB9XG5cbiAgdmFyIGRvY0VsZW0gPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIHNjcm9sbFZhbCxcbiAgICBpc1JldmVhbGVkLFxuICAgIG5vc2Nyb2xsLFxuICAgIGlzQW5pbWF0aW5nLFxuICAgIG1vZGlmeSA9ICQoJyNwb3N0LXRlbXBsYXRlJyk7XG5cbiAgZnVuY3Rpb24gc2Nyb2xsWSgpIHtcbiAgICByZXR1cm4gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY0VsZW0uc2Nyb2xsVG9wO1xuICB9XG5cbiAgZnVuY3Rpb24gc2Nyb2xsUGFnZSgpIHtcbiAgICBzY3JvbGxWYWwgPSBzY3JvbGxZKCk7XG5cbiAgICBpZiAobm9zY3JvbGwpIHtcbiAgICAgIGlmIChzY3JvbGxWYWwgPCAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBrZWVwIGl0IHRoYXQgd2F5XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgfVxuXG4gICAgaWYgKGlzQW5pbWF0aW5nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHNjcm9sbFZhbCA8PSAwICYmIGlzUmV2ZWFsZWQpIHtcbiAgICAgIHRvZ2dsZSgwKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2Nyb2xsVmFsID4gMCAmJiAhaXNSZXZlYWxlZCkge1xuICAgICAgdG9nZ2xlKDEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZShyZXZlYWwpIHtcbiAgICBpc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICBpZiAocmV2ZWFsKSB7XG4gICAgICBtb2RpZnkuYWRkQ2xhc3MoJ21vZGlmeScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBub3Njcm9sbCA9IHRydWU7XG4gICAgICBkaXNhYmxlX3Njcm9sbCgpO1xuICAgICAgbW9kaWZ5LnJlbW92ZUNsYXNzKCdtb2RpZnknKTtcbiAgICB9XG4gICAgaXNSZXZlYWxlZCA9ICFpc1JldmVhbGVkO1xuICAgIGlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgaWYgKHJldmVhbCkge1xuICAgICAgbm9zY3JvbGwgPSBmYWxzZTtcbiAgICAgIGVuYWJsZV9zY3JvbGwoKTtcbiAgICB9XG4gICAgLy8gc2ltdWxhdGluZyB0aGUgZW5kIG9mIHRoZSB0cmFuc2l0aW9uOlxuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICBpc1JldmVhbGVkID0gIWlzUmV2ZWFsZWQ7XG4gICAgICBpc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgaWYgKHJldmVhbCkge1xuICAgICAgICBub3Njcm9sbCA9IGZhbHNlO1xuICAgICAgICBlbmFibGVfc2Nyb2xsKCk7XG4gICAgICB9XG4gICAgfSwgNjAwKTtcbiAgfVxuXG4gIC8vIHJlZnJlc2hpbmcgdGhlIHBhZ2UuLi5cbiAgdmFyIHBhZ2VTY3JvbGwgPSBzY3JvbGxZKCk7XG4gIG5vc2Nyb2xsID0gcGFnZVNjcm9sbCA9PT0gMDtcbiAvKiBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCA+PSA3NjgpIHtcbiAgICBkaXNhYmxlX3Njcm9sbCgpO1xuICB9Ki9cbiAgaWYgKHBhZ2VTY3JvbGwpIHtcbiAgICBpc1JldmVhbGVkID0gdHJ1ZTtcbiAgICBtb2RpZnkuYWRkQ2xhc3MoJ21vZGlmeScpO1xuICB9XG5cbiAgaWYgKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggPj0gNzY4KSB7XG4gICAgJCh3aW5kb3cpLnNjcm9sbChzY3JvbGxQYWdlKTtcbiAgfVxuXG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9